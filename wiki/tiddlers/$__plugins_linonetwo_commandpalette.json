{"tiddlers":{"$:/plugins/linonetwo/commandpalette/CommandPaletteHistory":{"text":"{\n  \"history\": [\n    \"Explorer\",\n    \"Clone Tiddler\",\n    \"See Drafts\",\n    \"Refresh Server\",\n    \"Permaview\",\n    \"See Themes\",\n    \"Refresh Command Palette\",\n    \"See Shadows Tiddlers\",\n    \"See Orphans Tiddlers\",\n    \"Remove tag\",\n    \"Add tag to tiddler\",\n    \"Delete Tiddler\",\n    \"Close Tiddler\",\n    \"Recent Tiddlers\",\n    \"New Task with Title\",\n    \"Edit Tiddler\",\n    \"See Mising Tiddlers\",\n    \"Show CommandTiddlers\",\n    \"See untagged Tiddlers\",\n    \"See Languages\",\n    \"See Plugins\",\n    \"New Command Wizard\",\n    \"Cancel Tiddler\",\n    \"Save Tiddler\",\n    \"Close other Tiddlers\",\n    \"Permalink\",\n    \"Create Command\",\n    \"Unfold All Tiddlers\",\n    \"Fold All Tiddlers\",\n    \"Print\",\n    \"Close All Tiddlers\",\n    \"Save Wiki\",\n    \"Home\",\n    \"Toggle Fullscreen\",\n    \"New Tiddler\"\n  ]\n}\n","type":"application/json","created":"20200603153247010","modified":"20200610112340290","title":"$:/plugins/linonetwo/commandpalette/CommandPaletteHistory"},"$:/plugins/linonetwo/commandpalette/CommandPaletteSearchSteps":{"text":"{\n  \"steps\": [\n    {\n      \"filter\": \"[list[$:/StoryList]pinyinfuse[]]\",\n      \"caret\": \"30\",\n      \"filterFallback\": \"[list[$:/StoryList]search[]]\",\n      \"caretFallback\": \"26\",\n      \"hint\": \"历史记录\"\n    },\n    { \"filter\": \"[!is[system]pinyinfuse:title[]]\", \"caret\": \"29\", \"filterFallback\": \"[!is[system]search:title[]]\", \"caretFallback\": \"25\", \"hint\": \"在标题中\" },\n    {\n      \"filter\": \"[all[system+shadows]pinyinfuse:title[]]\",\n      \"caret\": \"37\",\n      \"filterFallback\": \"[all[system+shadows]search:title[]]\",\n      \"caretFallback\": \"33\",\n      \"hint\": \"在标题中 (系统)\"\n    },\n    { \"filter\": \"[!is[system]pinyinfuse[]]\", \"caret\": \"23\", \"filterFallback\": \"[!is[system]search[]]\", \"caretFallback\": \"19\", \"hint\": \"全局搜索\" },\n    { \"filter\": \"[all[shadows]pinyinfuse[]]\", \"caret\": \"24\", \"filterFallback\": \"[all[shadows]search[]]\", \"caretFallback\": \"20\", \"hint\": \"shadows\" }\n  ]\n}\n","type":"application/json","title":"$:/plugins/linonetwo/commandpalette/CommandPaletteSearchSteps"},"$:/plugins/linonetwo/commandpalette/CommandPaletteSettings":{"text":"{\n  \"maxResults\": \"30\",\n  \"maxResultHintSize\": 45,\n  \"neverBasic\": \"false\",\n  \"smoothScroll\": \"false\"\n}\n","type":"application/json","created":"20200604160432063","modified":"20200610112626066","title":"$:/plugins/linonetwo/commandpalette/CommandPaletteSettings"},"$:/plugins/linonetwo/commandpalette/CommandPaletteWidget.js":{"title":"$:/plugins/linonetwo/commandpalette/CommandPaletteWidget.js","text":"\"use strict\";\nvar __create = Object.create;\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __getProtoOf = Object.getPrototypeOf;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __commonJS = (cb, mod) => function __require() {\n  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(\n  isNodeMode || !mod || !mod.__esModule ? __defProp(target, \"default\", { value: mod, enumerable: true }) : target,\n  mod\n));\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_freeGlobal.js\nvar require_freeGlobal = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_freeGlobal.js\"(exports2, module2) {\n    var freeGlobal = typeof global == \"object\" && global && global.Object === Object && global;\n    module2.exports = freeGlobal;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_root.js\nvar require_root = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_root.js\"(exports2, module2) {\n    var freeGlobal = require_freeGlobal();\n    var freeSelf = typeof self == \"object\" && self && self.Object === Object && self;\n    var root = freeGlobal || freeSelf || Function(\"return this\")();\n    module2.exports = root;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Symbol.js\nvar require_Symbol = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Symbol.js\"(exports2, module2) {\n    var root = require_root();\n    var Symbol2 = root.Symbol;\n    module2.exports = Symbol2;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getRawTag.js\nvar require_getRawTag = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getRawTag.js\"(exports2, module2) {\n    var Symbol2 = require_Symbol();\n    var objectProto = Object.prototype;\n    var hasOwnProperty = objectProto.hasOwnProperty;\n    var nativeObjectToString = objectProto.toString;\n    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;\n    function getRawTag(value) {\n      var isOwn = hasOwnProperty.call(value, symToStringTag), tag = value[symToStringTag];\n      try {\n        value[symToStringTag] = void 0;\n        var unmasked = true;\n      } catch (e) {\n      }\n      var result = nativeObjectToString.call(value);\n      if (unmasked) {\n        if (isOwn) {\n          value[symToStringTag] = tag;\n        } else {\n          delete value[symToStringTag];\n        }\n      }\n      return result;\n    }\n    module2.exports = getRawTag;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_objectToString.js\nvar require_objectToString = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_objectToString.js\"(exports2, module2) {\n    var objectProto = Object.prototype;\n    var nativeObjectToString = objectProto.toString;\n    function objectToString(value) {\n      return nativeObjectToString.call(value);\n    }\n    module2.exports = objectToString;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseGetTag.js\nvar require_baseGetTag = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseGetTag.js\"(exports2, module2) {\n    var Symbol2 = require_Symbol();\n    var getRawTag = require_getRawTag();\n    var objectToString = require_objectToString();\n    var nullTag = \"[object Null]\";\n    var undefinedTag = \"[object Undefined]\";\n    var symToStringTag = Symbol2 ? Symbol2.toStringTag : void 0;\n    function baseGetTag(value) {\n      if (value == null) {\n        return value === void 0 ? undefinedTag : nullTag;\n      }\n      return symToStringTag && symToStringTag in Object(value) ? getRawTag(value) : objectToString(value);\n    }\n    module2.exports = baseGetTag;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObject.js\nvar require_isObject = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObject.js\"(exports2, module2) {\n    function isObject(value) {\n      var type = typeof value;\n      return value != null && (type == \"object\" || type == \"function\");\n    }\n    module2.exports = isObject;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isFunction.js\nvar require_isFunction = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isFunction.js\"(exports2, module2) {\n    var baseGetTag = require_baseGetTag();\n    var isObject = require_isObject();\n    var asyncTag = \"[object AsyncFunction]\";\n    var funcTag = \"[object Function]\";\n    var genTag = \"[object GeneratorFunction]\";\n    var proxyTag = \"[object Proxy]\";\n    function isFunction(value) {\n      if (!isObject(value)) {\n        return false;\n      }\n      var tag = baseGetTag(value);\n      return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n    }\n    module2.exports = isFunction;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_coreJsData.js\nvar require_coreJsData = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_coreJsData.js\"(exports2, module2) {\n    var root = require_root();\n    var coreJsData = root[\"__core-js_shared__\"];\n    module2.exports = coreJsData;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_isMasked.js\nvar require_isMasked = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_isMasked.js\"(exports2, module2) {\n    var coreJsData = require_coreJsData();\n    var maskSrcKey = function() {\n      var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || \"\");\n      return uid ? \"Symbol(src)_1.\" + uid : \"\";\n    }();\n    function isMasked(func) {\n      return !!maskSrcKey && maskSrcKey in func;\n    }\n    module2.exports = isMasked;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_toSource.js\nvar require_toSource = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_toSource.js\"(exports2, module2) {\n    var funcProto = Function.prototype;\n    var funcToString = funcProto.toString;\n    function toSource(func) {\n      if (func != null) {\n        try {\n          return funcToString.call(func);\n        } catch (e) {\n        }\n        try {\n          return func + \"\";\n        } catch (e) {\n        }\n      }\n      return \"\";\n    }\n    module2.exports = toSource;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseIsNative.js\nvar require_baseIsNative = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseIsNative.js\"(exports2, module2) {\n    var isFunction = require_isFunction();\n    var isMasked = require_isMasked();\n    var isObject = require_isObject();\n    var toSource = require_toSource();\n    var reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n    var reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n    var funcProto = Function.prototype;\n    var objectProto = Object.prototype;\n    var funcToString = funcProto.toString;\n    var hasOwnProperty = objectProto.hasOwnProperty;\n    var reIsNative = RegExp(\n      \"^\" + funcToString.call(hasOwnProperty).replace(reRegExpChar, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\"\n    );\n    function baseIsNative(value) {\n      if (!isObject(value) || isMasked(value)) {\n        return false;\n      }\n      var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n      return pattern.test(toSource(value));\n    }\n    module2.exports = baseIsNative;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getValue.js\nvar require_getValue = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getValue.js\"(exports2, module2) {\n    function getValue(object, key) {\n      return object == null ? void 0 : object[key];\n    }\n    module2.exports = getValue;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getNative.js\nvar require_getNative = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getNative.js\"(exports2, module2) {\n    var baseIsNative = require_baseIsNative();\n    var getValue = require_getValue();\n    function getNative(object, key) {\n      var value = getValue(object, key);\n      return baseIsNative(value) ? value : void 0;\n    }\n    module2.exports = getNative;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_nativeCreate.js\nvar require_nativeCreate = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_nativeCreate.js\"(exports2, module2) {\n    var getNative = require_getNative();\n    var nativeCreate = getNative(Object, \"create\");\n    module2.exports = nativeCreate;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashClear.js\nvar require_hashClear = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashClear.js\"(exports2, module2) {\n    var nativeCreate = require_nativeCreate();\n    function hashClear() {\n      this.__data__ = nativeCreate ? nativeCreate(null) : {};\n      this.size = 0;\n    }\n    module2.exports = hashClear;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashDelete.js\nvar require_hashDelete = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashDelete.js\"(exports2, module2) {\n    function hashDelete(key) {\n      var result = this.has(key) && delete this.__data__[key];\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n    module2.exports = hashDelete;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashGet.js\nvar require_hashGet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashGet.js\"(exports2, module2) {\n    var nativeCreate = require_nativeCreate();\n    var HASH_UNDEFINED = \"__lodash_hash_undefined__\";\n    var objectProto = Object.prototype;\n    var hasOwnProperty = objectProto.hasOwnProperty;\n    function hashGet(key) {\n      var data = this.__data__;\n      if (nativeCreate) {\n        var result = data[key];\n        return result === HASH_UNDEFINED ? void 0 : result;\n      }\n      return hasOwnProperty.call(data, key) ? data[key] : void 0;\n    }\n    module2.exports = hashGet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashHas.js\nvar require_hashHas = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashHas.js\"(exports2, module2) {\n    var nativeCreate = require_nativeCreate();\n    var objectProto = Object.prototype;\n    var hasOwnProperty = objectProto.hasOwnProperty;\n    function hashHas(key) {\n      var data = this.__data__;\n      return nativeCreate ? data[key] !== void 0 : hasOwnProperty.call(data, key);\n    }\n    module2.exports = hashHas;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashSet.js\nvar require_hashSet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_hashSet.js\"(exports2, module2) {\n    var nativeCreate = require_nativeCreate();\n    var HASH_UNDEFINED = \"__lodash_hash_undefined__\";\n    function hashSet(key, value) {\n      var data = this.__data__;\n      this.size += this.has(key) ? 0 : 1;\n      data[key] = nativeCreate && value === void 0 ? HASH_UNDEFINED : value;\n      return this;\n    }\n    module2.exports = hashSet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Hash.js\nvar require_Hash = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Hash.js\"(exports2, module2) {\n    var hashClear = require_hashClear();\n    var hashDelete = require_hashDelete();\n    var hashGet = require_hashGet();\n    var hashHas = require_hashHas();\n    var hashSet = require_hashSet();\n    function Hash(entries) {\n      var index = -1, length = entries == null ? 0 : entries.length;\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n    Hash.prototype.clear = hashClear;\n    Hash.prototype[\"delete\"] = hashDelete;\n    Hash.prototype.get = hashGet;\n    Hash.prototype.has = hashHas;\n    Hash.prototype.set = hashSet;\n    module2.exports = Hash;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheClear.js\nvar require_listCacheClear = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheClear.js\"(exports2, module2) {\n    function listCacheClear() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n    module2.exports = listCacheClear;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/eq.js\nvar require_eq = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/eq.js\"(exports2, module2) {\n    function eq(value, other) {\n      return value === other || value !== value && other !== other;\n    }\n    module2.exports = eq;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_assocIndexOf.js\nvar require_assocIndexOf = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_assocIndexOf.js\"(exports2, module2) {\n    var eq = require_eq();\n    function assocIndexOf(array, key) {\n      var length = array.length;\n      while (length--) {\n        if (eq(array[length][0], key)) {\n          return length;\n        }\n      }\n      return -1;\n    }\n    module2.exports = assocIndexOf;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheDelete.js\nvar require_listCacheDelete = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheDelete.js\"(exports2, module2) {\n    var assocIndexOf = require_assocIndexOf();\n    var arrayProto = Array.prototype;\n    var splice = arrayProto.splice;\n    function listCacheDelete(key) {\n      var data = this.__data__, index = assocIndexOf(data, key);\n      if (index < 0) {\n        return false;\n      }\n      var lastIndex = data.length - 1;\n      if (index == lastIndex) {\n        data.pop();\n      } else {\n        splice.call(data, index, 1);\n      }\n      --this.size;\n      return true;\n    }\n    module2.exports = listCacheDelete;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheGet.js\nvar require_listCacheGet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheGet.js\"(exports2, module2) {\n    var assocIndexOf = require_assocIndexOf();\n    function listCacheGet(key) {\n      var data = this.__data__, index = assocIndexOf(data, key);\n      return index < 0 ? void 0 : data[index][1];\n    }\n    module2.exports = listCacheGet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheHas.js\nvar require_listCacheHas = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheHas.js\"(exports2, module2) {\n    var assocIndexOf = require_assocIndexOf();\n    function listCacheHas(key) {\n      return assocIndexOf(this.__data__, key) > -1;\n    }\n    module2.exports = listCacheHas;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheSet.js\nvar require_listCacheSet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_listCacheSet.js\"(exports2, module2) {\n    var assocIndexOf = require_assocIndexOf();\n    function listCacheSet(key, value) {\n      var data = this.__data__, index = assocIndexOf(data, key);\n      if (index < 0) {\n        ++this.size;\n        data.push([key, value]);\n      } else {\n        data[index][1] = value;\n      }\n      return this;\n    }\n    module2.exports = listCacheSet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_ListCache.js\nvar require_ListCache = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_ListCache.js\"(exports2, module2) {\n    var listCacheClear = require_listCacheClear();\n    var listCacheDelete = require_listCacheDelete();\n    var listCacheGet = require_listCacheGet();\n    var listCacheHas = require_listCacheHas();\n    var listCacheSet = require_listCacheSet();\n    function ListCache(entries) {\n      var index = -1, length = entries == null ? 0 : entries.length;\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n    ListCache.prototype.clear = listCacheClear;\n    ListCache.prototype[\"delete\"] = listCacheDelete;\n    ListCache.prototype.get = listCacheGet;\n    ListCache.prototype.has = listCacheHas;\n    ListCache.prototype.set = listCacheSet;\n    module2.exports = ListCache;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Map.js\nvar require_Map = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Map.js\"(exports2, module2) {\n    var getNative = require_getNative();\n    var root = require_root();\n    var Map = getNative(root, \"Map\");\n    module2.exports = Map;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheClear.js\nvar require_mapCacheClear = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheClear.js\"(exports2, module2) {\n    var Hash = require_Hash();\n    var ListCache = require_ListCache();\n    var Map = require_Map();\n    function mapCacheClear() {\n      this.size = 0;\n      this.__data__ = {\n        \"hash\": new Hash(),\n        \"map\": new (Map || ListCache)(),\n        \"string\": new Hash()\n      };\n    }\n    module2.exports = mapCacheClear;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_isKeyable.js\nvar require_isKeyable = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_isKeyable.js\"(exports2, module2) {\n    function isKeyable(value) {\n      var type = typeof value;\n      return type == \"string\" || type == \"number\" || type == \"symbol\" || type == \"boolean\" ? value !== \"__proto__\" : value === null;\n    }\n    module2.exports = isKeyable;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getMapData.js\nvar require_getMapData = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_getMapData.js\"(exports2, module2) {\n    var isKeyable = require_isKeyable();\n    function getMapData(map, key) {\n      var data = map.__data__;\n      return isKeyable(key) ? data[typeof key == \"string\" ? \"string\" : \"hash\"] : data.map;\n    }\n    module2.exports = getMapData;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheDelete.js\nvar require_mapCacheDelete = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheDelete.js\"(exports2, module2) {\n    var getMapData = require_getMapData();\n    function mapCacheDelete(key) {\n      var result = getMapData(this, key)[\"delete\"](key);\n      this.size -= result ? 1 : 0;\n      return result;\n    }\n    module2.exports = mapCacheDelete;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheGet.js\nvar require_mapCacheGet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheGet.js\"(exports2, module2) {\n    var getMapData = require_getMapData();\n    function mapCacheGet(key) {\n      return getMapData(this, key).get(key);\n    }\n    module2.exports = mapCacheGet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheHas.js\nvar require_mapCacheHas = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheHas.js\"(exports2, module2) {\n    var getMapData = require_getMapData();\n    function mapCacheHas(key) {\n      return getMapData(this, key).has(key);\n    }\n    module2.exports = mapCacheHas;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheSet.js\nvar require_mapCacheSet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_mapCacheSet.js\"(exports2, module2) {\n    var getMapData = require_getMapData();\n    function mapCacheSet(key, value) {\n      var data = getMapData(this, key), size = data.size;\n      data.set(key, value);\n      this.size += data.size == size ? 0 : 1;\n      return this;\n    }\n    module2.exports = mapCacheSet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_MapCache.js\nvar require_MapCache = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_MapCache.js\"(exports2, module2) {\n    var mapCacheClear = require_mapCacheClear();\n    var mapCacheDelete = require_mapCacheDelete();\n    var mapCacheGet = require_mapCacheGet();\n    var mapCacheHas = require_mapCacheHas();\n    var mapCacheSet = require_mapCacheSet();\n    function MapCache(entries) {\n      var index = -1, length = entries == null ? 0 : entries.length;\n      this.clear();\n      while (++index < length) {\n        var entry = entries[index];\n        this.set(entry[0], entry[1]);\n      }\n    }\n    MapCache.prototype.clear = mapCacheClear;\n    MapCache.prototype[\"delete\"] = mapCacheDelete;\n    MapCache.prototype.get = mapCacheGet;\n    MapCache.prototype.has = mapCacheHas;\n    MapCache.prototype.set = mapCacheSet;\n    module2.exports = MapCache;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_setCacheAdd.js\nvar require_setCacheAdd = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_setCacheAdd.js\"(exports2, module2) {\n    var HASH_UNDEFINED = \"__lodash_hash_undefined__\";\n    function setCacheAdd(value) {\n      this.__data__.set(value, HASH_UNDEFINED);\n      return this;\n    }\n    module2.exports = setCacheAdd;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_setCacheHas.js\nvar require_setCacheHas = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_setCacheHas.js\"(exports2, module2) {\n    function setCacheHas(value) {\n      return this.__data__.has(value);\n    }\n    module2.exports = setCacheHas;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_SetCache.js\nvar require_SetCache = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_SetCache.js\"(exports2, module2) {\n    var MapCache = require_MapCache();\n    var setCacheAdd = require_setCacheAdd();\n    var setCacheHas = require_setCacheHas();\n    function SetCache(values) {\n      var index = -1, length = values == null ? 0 : values.length;\n      this.__data__ = new MapCache();\n      while (++index < length) {\n        this.add(values[index]);\n      }\n    }\n    SetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\n    SetCache.prototype.has = setCacheHas;\n    module2.exports = SetCache;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseFindIndex.js\nvar require_baseFindIndex = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseFindIndex.js\"(exports2, module2) {\n    function baseFindIndex(array, predicate, fromIndex, fromRight) {\n      var length = array.length, index = fromIndex + (fromRight ? 1 : -1);\n      while (fromRight ? index-- : ++index < length) {\n        if (predicate(array[index], index, array)) {\n          return index;\n        }\n      }\n      return -1;\n    }\n    module2.exports = baseFindIndex;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseIsNaN.js\nvar require_baseIsNaN = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseIsNaN.js\"(exports2, module2) {\n    function baseIsNaN(value) {\n      return value !== value;\n    }\n    module2.exports = baseIsNaN;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_strictIndexOf.js\nvar require_strictIndexOf = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_strictIndexOf.js\"(exports2, module2) {\n    function strictIndexOf(array, value, fromIndex) {\n      var index = fromIndex - 1, length = array.length;\n      while (++index < length) {\n        if (array[index] === value) {\n          return index;\n        }\n      }\n      return -1;\n    }\n    module2.exports = strictIndexOf;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseIndexOf.js\nvar require_baseIndexOf = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseIndexOf.js\"(exports2, module2) {\n    var baseFindIndex = require_baseFindIndex();\n    var baseIsNaN = require_baseIsNaN();\n    var strictIndexOf = require_strictIndexOf();\n    function baseIndexOf(array, value, fromIndex) {\n      return value === value ? strictIndexOf(array, value, fromIndex) : baseFindIndex(array, baseIsNaN, fromIndex);\n    }\n    module2.exports = baseIndexOf;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_arrayIncludes.js\nvar require_arrayIncludes = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_arrayIncludes.js\"(exports2, module2) {\n    var baseIndexOf = require_baseIndexOf();\n    function arrayIncludes(array, value) {\n      var length = array == null ? 0 : array.length;\n      return !!length && baseIndexOf(array, value, 0) > -1;\n    }\n    module2.exports = arrayIncludes;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_arrayIncludesWith.js\nvar require_arrayIncludesWith = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_arrayIncludesWith.js\"(exports2, module2) {\n    function arrayIncludesWith(array, value, comparator) {\n      var index = -1, length = array == null ? 0 : array.length;\n      while (++index < length) {\n        if (comparator(value, array[index])) {\n          return true;\n        }\n      }\n      return false;\n    }\n    module2.exports = arrayIncludesWith;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_cacheHas.js\nvar require_cacheHas = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_cacheHas.js\"(exports2, module2) {\n    function cacheHas(cache, key) {\n      return cache.has(key);\n    }\n    module2.exports = cacheHas;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Set.js\nvar require_Set = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_Set.js\"(exports2, module2) {\n    var getNative = require_getNative();\n    var root = require_root();\n    var Set2 = getNative(root, \"Set\");\n    module2.exports = Set2;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/noop.js\nvar require_noop = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/noop.js\"(exports2, module2) {\n    function noop() {\n    }\n    module2.exports = noop;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_setToArray.js\nvar require_setToArray = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_setToArray.js\"(exports2, module2) {\n    function setToArray(set) {\n      var index = -1, result = Array(set.size);\n      set.forEach(function(value) {\n        result[++index] = value;\n      });\n      return result;\n    }\n    module2.exports = setToArray;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_createSet.js\nvar require_createSet = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_createSet.js\"(exports2, module2) {\n    var Set2 = require_Set();\n    var noop = require_noop();\n    var setToArray = require_setToArray();\n    var INFINITY = 1 / 0;\n    var createSet = !(Set2 && 1 / setToArray(new Set2([, -0]))[1] == INFINITY) ? noop : function(values) {\n      return new Set2(values);\n    };\n    module2.exports = createSet;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseUniq.js\nvar require_baseUniq = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseUniq.js\"(exports2, module2) {\n    var SetCache = require_SetCache();\n    var arrayIncludes = require_arrayIncludes();\n    var arrayIncludesWith = require_arrayIncludesWith();\n    var cacheHas = require_cacheHas();\n    var createSet = require_createSet();\n    var setToArray = require_setToArray();\n    var LARGE_ARRAY_SIZE = 200;\n    function baseUniq(array, iteratee, comparator) {\n      var index = -1, includes = arrayIncludes, length = array.length, isCommon = true, result = [], seen = result;\n      if (comparator) {\n        isCommon = false;\n        includes = arrayIncludesWith;\n      } else if (length >= LARGE_ARRAY_SIZE) {\n        var set = iteratee ? null : createSet(array);\n        if (set) {\n          return setToArray(set);\n        }\n        isCommon = false;\n        includes = cacheHas;\n        seen = new SetCache();\n      } else {\n        seen = iteratee ? [] : result;\n      }\n      outer:\n        while (++index < length) {\n          var value = array[index], computed = iteratee ? iteratee(value) : value;\n          value = comparator || value !== 0 ? value : 0;\n          if (isCommon && computed === computed) {\n            var seenIndex = seen.length;\n            while (seenIndex--) {\n              if (seen[seenIndex] === computed) {\n                continue outer;\n              }\n            }\n            if (iteratee) {\n              seen.push(computed);\n            }\n            result.push(value);\n          } else if (!includes(seen, computed, comparator)) {\n            if (seen !== result) {\n              seen.push(computed);\n            }\n            result.push(value);\n          }\n        }\n      return result;\n    }\n    module2.exports = baseUniq;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/uniq.js\nvar require_uniq = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/uniq.js\"(exports2, module2) {\n    var baseUniq = require_baseUniq();\n    function uniq2(array) {\n      return array && array.length ? baseUniq(array) : [];\n    }\n    module2.exports = uniq2;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/now.js\nvar require_now = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/now.js\"(exports2, module2) {\n    var root = require_root();\n    var now = function() {\n      return root.Date.now();\n    };\n    module2.exports = now;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_trimmedEndIndex.js\nvar require_trimmedEndIndex = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_trimmedEndIndex.js\"(exports2, module2) {\n    var reWhitespace = /\\s/;\n    function trimmedEndIndex(string) {\n      var index = string.length;\n      while (index-- && reWhitespace.test(string.charAt(index))) {\n      }\n      return index;\n    }\n    module2.exports = trimmedEndIndex;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseTrim.js\nvar require_baseTrim = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/_baseTrim.js\"(exports2, module2) {\n    var trimmedEndIndex = require_trimmedEndIndex();\n    var reTrimStart = /^\\s+/;\n    function baseTrim(string) {\n      return string ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, \"\") : string;\n    }\n    module2.exports = baseTrim;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObjectLike.js\nvar require_isObjectLike = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isObjectLike.js\"(exports2, module2) {\n    function isObjectLike(value) {\n      return value != null && typeof value == \"object\";\n    }\n    module2.exports = isObjectLike;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isSymbol.js\nvar require_isSymbol = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/isSymbol.js\"(exports2, module2) {\n    var baseGetTag = require_baseGetTag();\n    var isObjectLike = require_isObjectLike();\n    var symbolTag = \"[object Symbol]\";\n    function isSymbol(value) {\n      return typeof value == \"symbol\" || isObjectLike(value) && baseGetTag(value) == symbolTag;\n    }\n    module2.exports = isSymbol;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/toNumber.js\nvar require_toNumber = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/toNumber.js\"(exports2, module2) {\n    var baseTrim = require_baseTrim();\n    var isObject = require_isObject();\n    var isSymbol = require_isSymbol();\n    var NAN = 0 / 0;\n    var reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n    var reIsBinary = /^0b[01]+$/i;\n    var reIsOctal = /^0o[0-7]+$/i;\n    var freeParseInt = parseInt;\n    function toNumber(value) {\n      if (typeof value == \"number\") {\n        return value;\n      }\n      if (isSymbol(value)) {\n        return NAN;\n      }\n      if (isObject(value)) {\n        var other = typeof value.valueOf == \"function\" ? value.valueOf() : value;\n        value = isObject(other) ? other + \"\" : other;\n      }\n      if (typeof value != \"string\") {\n        return value === 0 ? value : +value;\n      }\n      value = baseTrim(value);\n      var isBinary = reIsBinary.test(value);\n      return isBinary || reIsOctal.test(value) ? freeParseInt(value.slice(2), isBinary ? 2 : 8) : reIsBadHex.test(value) ? NAN : +value;\n    }\n    module2.exports = toNumber;\n  }\n});\n\n// node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/debounce.js\nvar require_debounce = __commonJS({\n  \"node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/debounce.js\"(exports2, module2) {\n    var isObject = require_isObject();\n    var now = require_now();\n    var toNumber = require_toNumber();\n    var FUNC_ERROR_TEXT = \"Expected a function\";\n    var nativeMax = Math.max;\n    var nativeMin = Math.min;\n    function debounce2(func, wait, options) {\n      var lastArgs, lastThis, maxWait, result, timerId, lastCallTime, lastInvokeTime = 0, leading = false, maxing = false, trailing = true;\n      if (typeof func != \"function\") {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      wait = toNumber(wait) || 0;\n      if (isObject(options)) {\n        leading = !!options.leading;\n        maxing = \"maxWait\" in options;\n        maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n        trailing = \"trailing\" in options ? !!options.trailing : trailing;\n      }\n      function invokeFunc(time) {\n        var args = lastArgs, thisArg = lastThis;\n        lastArgs = lastThis = void 0;\n        lastInvokeTime = time;\n        result = func.apply(thisArg, args);\n        return result;\n      }\n      function leadingEdge(time) {\n        lastInvokeTime = time;\n        timerId = setTimeout(timerExpired, wait);\n        return leading ? invokeFunc(time) : result;\n      }\n      function remainingWait(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime, timeWaiting = wait - timeSinceLastCall;\n        return maxing ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke) : timeWaiting;\n      }\n      function shouldInvoke(time) {\n        var timeSinceLastCall = time - lastCallTime, timeSinceLastInvoke = time - lastInvokeTime;\n        return lastCallTime === void 0 || timeSinceLastCall >= wait || timeSinceLastCall < 0 || maxing && timeSinceLastInvoke >= maxWait;\n      }\n      function timerExpired() {\n        var time = now();\n        if (shouldInvoke(time)) {\n          return trailingEdge(time);\n        }\n        timerId = setTimeout(timerExpired, remainingWait(time));\n      }\n      function trailingEdge(time) {\n        timerId = void 0;\n        if (trailing && lastArgs) {\n          return invokeFunc(time);\n        }\n        lastArgs = lastThis = void 0;\n        return result;\n      }\n      function cancel() {\n        if (timerId !== void 0) {\n          clearTimeout(timerId);\n        }\n        lastInvokeTime = 0;\n        lastArgs = lastCallTime = lastThis = timerId = void 0;\n      }\n      function flush() {\n        return timerId === void 0 ? result : trailingEdge(now());\n      }\n      function debounced() {\n        var time = now(), isInvoking = shouldInvoke(time);\n        lastArgs = arguments;\n        lastThis = this;\n        lastCallTime = time;\n        if (isInvoking) {\n          if (timerId === void 0) {\n            return leadingEdge(lastCallTime);\n          }\n          if (maxing) {\n            clearTimeout(timerId);\n            timerId = setTimeout(timerExpired, wait);\n            return invokeFunc(lastCallTime);\n          }\n        }\n        if (timerId === void 0) {\n          timerId = setTimeout(timerExpired, wait);\n        }\n        return result;\n      }\n      debounced.cancel = cancel;\n      debounced.flush = flush;\n      return debounced;\n    }\n    module2.exports = debounce2;\n  }\n});\n\n// src/CommandPaletteWidget.ts\nvar CommandPaletteWidget_exports = {};\n__toCommonJS(CommandPaletteWidget_exports);\nvar import_uniq = __toESM(require_uniq());\nvar import_debounce = __toESM(require_debounce());\nvar Widget = require(\"$:/core/modules/widgets/widget.js\").widget;\nvar CommandPaletteWidget = class extends Widget {\n  actions = [];\n  triggers = [];\n  currentResults = [];\n  typeField = \"command-palette-type\";\n  nameField = \"command-palette-name\";\n  captionField = \"command-palette-caption\";\n  hintField = \"command-palette-hint\";\n  modeField = \"command-palette-mode\";\n  userInputField = \"command-palette-user-input\";\n  caretField = \"command-palette-caret\";\n  immediateField = \"command-palette-immediate\";\n  triggerField = \"command-palette-trigger\";\n  currentSelection = 0;\n  symbolProviders = {};\n  blockProviderChange = false;\n  defaultSettings = {\n    maxResults: 15,\n    maxResultHintSize: 45,\n    neverBasic: false,\n    showHistoryOnOpen: true,\n    escapeGoesBack: true,\n    alwaysPassSelection: false,\n    theme: \"$:/plugins/linonetwo/commandpalette/Compact.css\"\n  };\n  settings = {};\n  commandHistoryPath = \"$:/plugins/linonetwo/commandpalette/CommandPaletteHistory\";\n  settingsPath = \"$:/plugins/linonetwo/commandpalette/CommandPaletteSettings\";\n  searchStepsPath = \"$:/plugins/linonetwo/commandpalette/CommandPaletteSearchSteps\";\n  customCommandsTag = \"$:/tags/CommandPaletteCommand\";\n  themesTag = \"$:/tags/CommandPaletteTheme\";\n  currentResolver = () => {\n  };\n  currentProvider = () => {\n  };\n  searchSteps = [];\n  isIMEOpen = false;\n  constructor(parseTreeNode, options) {\n    super(parseTreeNode, options);\n    this.initialise(parseTreeNode, options);\n    this.onInput = (0, import_debounce.default)(this.onInput, 300);\n  }\n  actionStringBuilder(text) {\n    return (e) => this.invokeActionString(text, this, e);\n  }\n  actionStringInput(action, hint, _e) {\n    this.blockProviderChange = true;\n    this.allowInputFieldSelection = true;\n    this.hint.innerText = hint;\n    this.input.value = \"\";\n    this.currentProvider = () => {\n    };\n    this.currentResolver = (e) => {\n      this.invokeActionString(action, this, e, { commandpaletteinput: this.input.value });\n      this.closePalette();\n    };\n    this.showResults([]);\n    this.onInput(this.input.value);\n  }\n  invokeFieldMangler(tiddler, message, parameter, e) {\n    const action = `<$fieldmangler tiddler=\"${tiddler}\">\n\t\t\t<$action-sendmessage $message=\"${message}\" $param=\"${parameter}\"/>\n\t\t\t</$fieldmangler>`;\n    this.invokeActionString(action, this, e);\n  }\n  tagOperation(_event, hintTiddler, hintTag, filter, allowNoSelection, message) {\n    this.blockProviderChange = true;\n    if (allowNoSelection)\n      this.allowInputFieldSelection = true;\n    this.currentProvider = this.historyProviderBuilder(hintTiddler);\n    this.currentResolver = (_e) => {\n      if (this.currentSelection === 0)\n        return;\n      const tiddler = this.getDataFromResultDiv(this.currentResults[this.currentSelection - 1], \"name\");\n      this.currentProvider = (terms) => {\n        this.currentSelection = 0;\n        this.hint.innerText = hintTag;\n        if (tiddler) {\n          const searches = filter(tiddler, terms);\n          this.showResults(\n            searches.map((s) => {\n              return { name: s };\n            })\n          );\n        }\n      };\n      this.input.value = \"\";\n      this.onInput(this.input.value);\n      this.currentResolver = (e) => {\n        if (!allowNoSelection && this.currentSelection === 0)\n          return;\n        let tag = this.input.value;\n        if (this.currentSelection !== 0) {\n          tag = this.getDataFromResultDiv(this.currentResults[this.currentSelection - 1], \"name\");\n        }\n        this.invokeFieldMangler(tiddler, message, tag, e);\n        if (e.getModifierState(\"Shift\")) {\n          this.onInput(this.input.value);\n        } else {\n          this.closePalette();\n        }\n      };\n    };\n    this.input.value = \"\";\n    this.onInput(this.input.value);\n  }\n  refreshThemes(e) {\n    this.themes = this.getTiddlersWithTag(this.themesTag);\n    let found = false;\n    for (const theme of this.themes) {\n      const themeName = theme.fields.title;\n      if (themeName === this.settings.theme) {\n        found = true;\n        this.addTagIfNecessary(themeName, \"$:/tags/Stylesheet\", e);\n      } else {\n        this.invokeFieldMangler(themeName, \"tm-remove-tag\", \"$:/tags/Stylesheet\", e);\n      }\n    }\n    if (found)\n      return;\n    this.addTagIfNecessary(this.defaultSettings.theme, \"$:/tags/Stylesheet\", e);\n  }\n  addTagIfNecessary(tiddler, tag, e) {\n    if (this.hasTag(tiddler, tag))\n      return;\n    this.invokeFieldMangler(tiddler, \"tm-add-tag\", tag, e);\n  }\n  hasTag(tiddler, tag) {\n    return !!$tw.wiki.getTiddler(tiddler)?.fields?.tags?.includes(tag);\n  }\n  refreshCommands() {\n    this.actions = [];\n    this.actions.push(\n      {\n        name: \"Refresh Command Palette\",\n        action: (_e) => {\n          this.refreshCommandPalette();\n          this.promptCommand(\"\");\n        },\n        keepPalette: true\n      },\n      { name: \"Explorer\", action: (e) => this.explorer(e), keepPalette: true },\n      { name: \"History\", caption: \"\\u67E5\\u770B\\u5386\\u53F2\\u8BB0\\u5F55\", action: (_e) => this.showHistory(), keepPalette: true },\n      { name: \"New Command Wizard\", caption: \"\\u4EA4\\u4E92\\u5F0F\\u521B\\u5EFA\\u65B0\\u547D\\u4EE4\", action: (_e) => this.newCommandWizard(), keepPalette: true },\n      {\n        name: \"Add tag to tiddler\",\n        caption: \"\\u5411\\u6761\\u76EE\\u6DFB\\u52A0\\u6807\\u7B7E\",\n        action: (e) => this.tagOperation(\n          e,\n          \"\\u9009\\u62E9\\u4E00\\u4E2A\\u6761\\u76EE\\u6765\\u6DFB\\u52A0\\u6807\\u7B7E\",\n          \"\\u9009\\u62E9\\u4E00\\u4E2A\\u6807\\u7B7E\\u6765\\u6DFB\\u52A0 (\\u21E7\\u23CE \\u53EF\\u4EE5\\u591A\\u6B21\\u6DFB\\u52A0)\",\n          (tiddler, terms) => $tw.wiki.filterTiddlers(\n            `[!is[system]tags[]] [is[system]tags[]] -[[${tiddler}]tags[]] +[${$tw.utils.pinyinfuse ? \"pinyinfuse\" : \"search\"}[${terms}]]`\n          ),\n          true,\n          \"tm-add-tag\"\n        ),\n        keepPalette: true\n      },\n      {\n        name: \"Remove tag\",\n        caption: \"\\u53BB\\u9664\\u6807\\u7B7E\",\n        action: (e) => this.tagOperation(\n          e,\n          \"\\u9009\\u62E9\\u4E00\\u4E2A\\u6761\\u76EE\\u6765\\u53BB\\u9664\\u6807\\u7B7E\",\n          \"\\u9009\\u62E9\\u4E00\\u4E2A\\u6807\\u7B7E\\u6765\\u53BB\\u9664 (\\u21E7\\u23CE \\u53EF\\u4EE5\\u53BB\\u9664\\u591A\\u6B21)\",\n          (tiddler, terms) => $tw.wiki.filterTiddlers(`[[${tiddler}]tags[]] +[${$tw.utils.pinyinfuse ? \"pinyinfuse\" : \"search\"}[${terms}]]`),\n          false,\n          \"tm-remove-tag\"\n        ),\n        keepPalette: true\n      }\n    );\n    const commandTiddlers = this.getTiddlersWithTag(this.customCommandsTag);\n    for (const tiddler of commandTiddlers) {\n      if (!tiddler.fields[this.typeField] === void 0)\n        continue;\n      const name = tiddler.fields[this.nameField];\n      if (typeof name !== \"string\")\n        throw new Error(`\\u547D\\u4EE4\\u83DC\\u5355\\u6761\\u76EE ${tiddler.fields.title} \\u7F3A\\u5931 ${this.nameField} \\u5B57\\u6BB5`);\n      const caption = this.translateCaption(tiddler.fields[this.captionField]);\n      const type = tiddler.fields[this.typeField];\n      let text = this.translateCaption(tiddler.fields.text);\n      if (text === void 0)\n        text = \"\";\n      const textFirstLine = (text.match(/^.*/) ?? [\"\"])[0];\n      const hint = this.translateCaption(tiddler.fields[this.hintField] ?? tiddler.fields[this.nameField] ?? \"\");\n      if (type === \"shortcut\") {\n        ``;\n        const trigger = tiddler.fields[this.triggerField];\n        if (trigger === void 0)\n          continue;\n        this.triggers.push({ name, caption, trigger, text, hint });\n        continue;\n      }\n      if (!tiddler.fields[this.nameField] === void 0)\n        continue;\n      if (type === \"prompt\") {\n        const immediate = !!tiddler.fields[this.immediateField];\n        const caret = Number(tiddler.fields[this.caretField]) ?? 0;\n        const action = { name, caption, hint, action: () => this.promptCommand(textFirstLine, caret), keepPalette: !immediate, immediate };\n        this.actions.push(action);\n        continue;\n      }\n      if (type === \"prompt-basic\") {\n        const caret = Number(tiddler.fields[this.caretField]) ?? 0;\n        const action = { name, caption, hint, action: () => this.promptCommandBasic(textFirstLine, caret, hint), keepPalette: true };\n        this.actions.push(action);\n        continue;\n      }\n      if (type === \"message\") {\n        this.actions.push({ name, caption, hint, action: (e) => this.tmMessageBuilder(textFirstLine)(e), keepPalette: false });\n        continue;\n      }\n      if (type === \"actionString\") {\n        const userInput = tiddler.fields[this.userInputField] !== void 0 && tiddler.fields[this.userInputField] === \"true\";\n        if (userInput) {\n          this.actions.push({ name, caption, hint, action: (e) => this.actionStringInput(text, hint, e), keepPalette: true });\n        } else {\n          this.actions.push({ name, caption, hint, action: (e) => this.actionStringBuilder(text)(e), keepPalette: false });\n        }\n        continue;\n      }\n      if (type === \"history\") {\n        const mode = tiddler.fields[this.modeField];\n        this.actions.push({\n          name,\n          caption,\n          hint,\n          action: (e) => this.commandWithHistoryPicker(textFirstLine, hint, mode).handler(e),\n          keepPalette: true\n        });\n        continue;\n      }\n    }\n  }\n  translateCaption(caption) {\n    return $tw.wiki.renderText(\"text/plain\", \"text/vnd.tiddlywiki\", caption);\n  }\n  newCommandWizard() {\n    this.blockProviderChange = true;\n    this.input.value = \"\";\n    this.hint.innerText = \"\\u547D\\u4EE4\\u540D\";\n    let name = \"\";\n    let type = \"\";\n    let hint = \"\";\n    const messageStep = () => {\n      this.input.value = \"\";\n      this.hint.innerText = \"\\u8F93\\u5165\\u4FE1\\u606F\";\n      this.currentResolver = (e) => {\n        this.tmMessageBuilder(\"tm-new-tiddler\", {\n          title: \"$:/\" + name,\n          tags: this.customCommandsTag,\n          [this.typeField]: type,\n          [this.nameField]: name,\n          [this.hintField]: hint,\n          text: this.input.value\n        })(e);\n        this.closePalette();\n      };\n    };\n    const hintStep = () => {\n      this.input.value = \"\";\n      this.hint.innerText = \"\\u8F93\\u5165\\u63D0\\u793A\\u6587\\u672C\";\n      this.currentResolver = (_e) => {\n        hint = this.input.value;\n        messageStep();\n      };\n    };\n    const typeStep = () => {\n      this.input.value = \"\";\n      this.hint.innerText = \"Enter type (prompt, prompt-basic, message, actionString, history)\";\n      this.currentResolver = (e) => {\n        type = this.input.value;\n        if (type === \"history\") {\n          hintStep();\n        } else {\n          this.tmMessageBuilder(\"tm-new-tiddler\", {\n            title: \"$:/\" + name,\n            tags: this.customCommandsTag,\n            [this.typeField]: type,\n            [this.nameField]: name\n          })(e);\n          this.closePalette();\n        }\n      };\n    };\n    this.currentProvider = (_terms) => {\n    };\n    this.currentResolver = (_e) => {\n      if (this.input.value.length === 0)\n        return;\n      name = this.input.value;\n      typeStep();\n    };\n    this.showResults([]);\n  }\n  explorer(_e) {\n    this.blockProviderChange = true;\n    this.input.value = \"$:/\";\n    this.lastExplorerInput = \"$:/\";\n    this.hint.innerText = \"Explorer (\\u21E7\\u23CE to add multiple)\";\n    this.currentProvider = (terms) => this.explorerProvider(\"$:/\", terms);\n    this.currentResolver = (e) => {\n      if (this.currentSelection === 0)\n        return;\n      this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1])?.(e);\n    };\n    this.onInput();\n  }\n  explorerProvider(url, _terms) {\n    const switchFolder = (url2) => {\n      this.input.value = url2;\n      this.lastExplorerInput = this.input.value;\n      this.currentProvider = (terms) => this.explorerProvider(url2, terms);\n      this.onInput();\n    };\n    if (!this.input.value.startsWith(url)) {\n      this.input.value = this.lastExplorerInput;\n    }\n    this.lastExplorerInput = this.input.value;\n    this.currentSelection = 0;\n    const search = this.input.value.substr(url.length);\n    const tiddlers = $tw.wiki.filterTiddlers(`[removeprefix[${url}]splitbefore[/]sort[]${$tw.utils.pinyinfuse ? \"pinyinfuse\" : \"search\"}[${search}]]`);\n    const folders = [];\n    const files = [];\n    for (const tiddler of tiddlers) {\n      if (tiddler.endsWith(\"/\")) {\n        folders.push({ name: tiddler, action: (_e) => switchFolder(`${url}${tiddler}`) });\n      } else {\n        files.push({\n          name: tiddler,\n          action: (e) => {\n            this.navigateTo(`${url}${tiddler}`);\n            if (!e.getModifierState(\"Shift\")) {\n              this.closePalette();\n            }\n          }\n        });\n      }\n    }\n    let topResult;\n    if (url !== \"$:/\") {\n      const splits = url.split(\"/\");\n      splits.splice(-2);\n      const parent = splits.join(\"/\") + \"/\";\n      topResult = { name: \"..\", action: (_e) => switchFolder(parent) };\n      this.showResults([topResult, ...folders, ...files]);\n      return;\n    }\n    this.showResults([...folders, ...files]);\n  }\n  setSetting(name, value) {\n    if (typeof value === \"string\") {\n      if (value === \"true\")\n        value = true;\n      if (value === \"false\")\n        value = false;\n    }\n    this.settings[name] = value;\n    $tw.wiki.setTiddlerData(this.settingsPath, this.settings);\n  }\n  refreshSettings() {\n    this.settings = $tw.wiki.getTiddlerData(this.settingsPath, { ...this.defaultSettings });\n    for (const property in this.defaultSettings) {\n      if (!this.defaultSettings.hasOwnProperty(property))\n        continue;\n      const ownProperty = property;\n      if (this.settings[ownProperty] === void 0) {\n        this.settings[ownProperty] = this.defaultSettings[ownProperty];\n      }\n    }\n    for (const property in this.settings) {\n      if (!this.settings.hasOwnProperty(property))\n        continue;\n      const ownProperty = property;\n      if (typeof this.settings[ownProperty] !== \"string\")\n        continue;\n      if (this.settings[ownProperty].toLowerCase() === \"true\")\n        this.settings[ownProperty] = true;\n      if (this.settings[ownProperty].toLowerCase() === \"false\")\n        this.settings[ownProperty] = false;\n    }\n  }\n  getTiddlersWithTag(tag) {\n    const tiddlers = $tw.wiki.getTiddlersWithTag(tag);\n    return tiddlers.map((t) => $tw.wiki.getTiddler(t));\n  }\n  render(parent, nextSibling) {\n    this.parentDomNode = parent;\n    this.execute();\n    if ($tw.utils.pinyinfuse === void 0) {\n      console.warn(\"\\u9700\\u8981\\u5B89\\u88C5 linonetwo/pinyin-fuzzy-search \\u63D2\\u4EF6\\u4EE5\\u83B7\\u5F97\\u6A21\\u7CCA\\u641C\\u7D22\\u548C\\u62FC\\u97F3\\u641C\\u7D22\\u7684\\u80FD\\u529B\");\n    }\n    this.history = $tw.wiki.getTiddlerData(this.commandHistoryPath, { history: [] }).history;\n    $tw.rootWidget.addEventListener(\"open-command-palette\", (e) => {\n      $tw.hooks.invokeHook(\"th-open-command-palette\", e);\n      this.openPalette(e, e.param);\n    });\n    $tw.rootWidget.addEventListener(\"open-command-palette-selection\", (e) => this.openPaletteSelection(e));\n    $tw.rootWidget.addEventListener(\"insert-command-palette-result\", (e) => this.insertSelectedResult());\n    $tw.rootWidget.addEventListener(\"command-palette-switch-history\", (e) => this.handleSwitchHistory(e, true));\n    $tw.rootWidget.addEventListener(\"command-palette-switch-history-back\", (e) => this.handleSwitchHistory(e, false));\n    const inputAndMainHintWrapper = this.createElement(\"div\", { className: \"inputhintwrapper\" });\n    this.div = this.createElement(\"div\", { className: \"commandpalette\" }, { display: \"none\" });\n    this.mask = this.createElement(\"div\", { className: \"commandpalette-masklayer\" }, { opacity: \"0\" });\n    this.input = this.createElement(\"input\", { type: \"text\" });\n    this.hint = this.createElement(\"div\", { className: \"commandpalettehint commandpalettehintmain\" });\n    inputAndMainHintWrapper.append(this.input, this.hint);\n    this.scrollDiv = this.createElement(\"div\", { className: \"cp-scroll\" });\n    this.div.append(inputAndMainHintWrapper, this.scrollDiv);\n    this.input.addEventListener(\"keydown\", (e) => this.onKeyDown(e));\n    this.input.addEventListener(\"input\", () => this.onInput(this.input.value));\n    this.input.addEventListener(\n      \"compositionstart\",\n      () => {\n        this.isIMEOpen = true;\n      },\n      false\n    );\n    this.input.addEventListener(\n      \"compositionend\",\n      () => {\n        this.isIMEOpen = false;\n      },\n      false\n    );\n    document.addEventListener(\"click\", (e) => this.onClick(e));\n    parent.insertBefore(this.mask, nextSibling);\n    parent.insertBefore(this.div, nextSibling);\n    this.refreshCommandPalette();\n    this.symbolProviders[\">\"] = { searcher: (terms) => this.actionProvider(terms), resolver: (e) => this.actionResolver(e) };\n    this.symbolProviders[\"\\u300B\"] = this.symbolProviders[\">\"];\n    this.symbolProviders[\"##\"] = { searcher: (terms) => this.tagListProvider(terms), resolver: (e) => this.tagListResolver(e) };\n    this.symbolProviders[\"#\"] = { searcher: (terms) => this.tagProvider(terms), resolver: (e) => this.defaultResolver(e) };\n    this.symbolProviders[\"?\"] = { searcher: (terms) => this.helpProvider(terms), resolver: (e) => this.helpResolver(e) };\n    this.symbolProviders[\"\\uFF1F\"] = this.symbolProviders[\"?\"];\n    this.symbolProviders[\"[\"] = { searcher: (terms, hint) => this.filterProvider(terms, hint), resolver: (e) => this.filterResolver(e) };\n    this.symbolProviders[\"+\"] = { searcher: (terms) => this.createTiddlerProvider(terms), resolver: (e) => this.createTiddlerResolver(e) };\n    this.symbolProviders[\"|\"] = { searcher: (terms) => this.settingsProvider(terms), resolver: (e) => this.settingsResolver(e) };\n    this.currentResults = [];\n    this.currentProvider = () => {\n    };\n  }\n  helpProvider(_terms) {\n    this.currentSelection = 0;\n    this.hint.innerText = \"Help\";\n    const searches = [\n      { name: \"\\u76F4\\u63A5\\u6253\\u5B57\\u662F\\u641C\\u7D22\\u6761\\u76EE\\u6807\\u9898\\u548C\\u5185\\u5BB9\\uFF1B\\u800C\\u4EE5\\u4E0B\\u8FF0\\u7279\\u6B8A\\u5B57\\u7B26\\u5F00\\u5934\\u53EF\\u4EE5\\u6267\\u884C\\u7279\\u6B8A\\u641C\\u7D22\", action: () => this.promptCommand(\"\") },\n      { name: \"> \\u67E5\\u770B\\u548C\\u641C\\u7D22\\u547D\\u4EE4\\u5217\\u8868\", action: () => this.promptCommand(\">\") },\n      { name: \"+ \\u521B\\u5EFA\\u6761\\u76EE\\uFF0C\\u5148\\u8F93\\u5165\\u6761\\u76EE\\u540D\\uFF0C\\u7136\\u540E\\u53EF\\u4EE5\\u5E26\\u4E0A#\\u6253\\u6807\\u7B7E\", action: () => this.promptCommand(\"+\") },\n      { name: \"# \\u5217\\u51FA\\u5E26\\u6807\\u7B7E\\u7684\\u6761\\u76EE\\uFF08\\u6807\\u7B7E\\u4E0D\\u53EF\\u5305\\u542B\\u7A7A\\u683C\\uFF0C\\u7528\\u7A7A\\u683C\\u9694\\u5F00\\u591A\\u4E2A#\\u5F00\\u5934\\u7684\\u6807\\u7B7E\\uFF0C\\u4E0D\\u5E26#\\u7684\\u4F5C\\u4E3A\\u641C\\u7D22\\u8BCD\\uFF09\", action: () => this.promptCommand(\"#\") },\n      { name: \"## \\u641C\\u7D22\\u6807\\u7B7E\\u5217\\u8868\", action: () => this.promptCommand(\"##\", 2) },\n      { name: \"[ \\u7B5B\\u9009\\u5668\\u8BED\\u53E5\", action: () => this.promptCommand(\"[\") },\n      { name: \"| \\u547D\\u4EE4\\u83DC\\u5355\\u8BBE\\u7F6E\", action: () => this.promptCommand(\"|\") },\n      { name: \"\\\\ \\u89C4\\u907F\\u7B2C\\u4E00\\u4E2A\\u5B57\\u7B26\\u662F\\u4E0A\\u8FF0\\u547D\\u4EE4\\u5B57\\u7B26\\u7684\\u60C5\\u51B5\\uFF0C\\u4F8B\\u5982\\u300C\\\\#\\u300D\\u53EF\\u641C\\u6807\\u9898\\u4EE5\\u300C#\\u300D\\u8D77\\u5934\\u7684\\u6761\\u76EE\", action: () => this.promptCommand(\"\\\\\") },\n      { name: \"? \\u6253\\u5F00\\u5E2E\\u52A9\", action: () => this.promptCommand(\"?\") }\n    ];\n    this.showResults(searches);\n  }\n  parseCommand(text) {\n    let terms = \"\";\n    let resolver;\n    let provider;\n    const shortcut = this.triggers.find((t) => text.startsWith(t.trigger));\n    if (shortcut === void 0) {\n      const providerSymbol = Object.keys(this.symbolProviders).sort((a, b) => -a.length + b.length).find((symbol) => text.startsWith(symbol));\n      if (providerSymbol === void 0) {\n        resolver = this.defaultResolver;\n        provider = this.defaultProvider;\n        terms = text;\n      } else {\n        provider = this.symbolProviders[providerSymbol].searcher;\n        resolver = this.symbolProviders[providerSymbol].resolver;\n        terms = text.replace(providerSymbol, \"\");\n      }\n    } else {\n      resolver = (e) => {\n        const inputWithoutShortcut = this.input.value.substr(shortcut.trigger.length);\n        this.invokeActionString(shortcut.text, this, e, { commandpaletteinput: inputWithoutShortcut });\n        this.closePalette();\n      };\n      provider = (_terms) => {\n        this.hint.innerText = shortcut.hint;\n        this.showResults([]);\n      };\n    }\n    return { resolver, provider, terms };\n  }\n  refreshSearchSteps() {\n    this.searchSteps = [];\n    const steps = $tw.wiki.getTiddlerData(this.searchStepsPath).steps;\n    for (const step of steps) {\n      this.searchSteps.push(\n        this.searchStepBuilder(\n          $tw.utils.pinyinfuse ? step.filter : step.filterFallback,\n          Number($tw.utils.pinyinfuse ? step.caret : step.caretFallback),\n          step.hint\n        )\n      );\n    }\n  }\n  refreshCommandPalette() {\n    this.refreshSettings();\n    this.refreshThemes();\n    this.refreshCommands();\n    this.refreshSearchSteps();\n  }\n  handleSwitchHistory(event, forward) {\n    if (!this.isOpened) {\n      this.openPalette(event);\n    }\n    this.onKeyDown(\n      new KeyboardEvent(\"keydown\", {\n        bubbles: false,\n        cancelable: true,\n        key: forward ? \"ArrowDown\" : \"ArrowUp\",\n        shiftKey: false\n      })\n    );\n    const onCtrlKeyUp = (keyUpEvent) => {\n      if (!keyUpEvent.ctrlKey) {\n        this.currentResolver(keyUpEvent);\n        window.removeEventListener(\"keyup\", onCtrlKeyUp);\n      }\n    };\n    window.addEventListener(\"keyup\", onCtrlKeyUp);\n  }\n  updateCommandHistory(command) {\n    this.history = [.../* @__PURE__ */ new Set([command.name, ...this.history])];\n    $tw.wiki.setTiddlerData(this.commandHistoryPath, { history: this.history });\n  }\n  historyProviderBuilder(hint, mode) {\n    return (_terms) => {\n      this.currentSelection = 0;\n      this.hint.innerText = hint;\n      let results;\n      if (mode !== void 0 && mode === \"drafts\") {\n        results = $tw.wiki.filterTiddlers(\"[has:field[draft.of]]\");\n      } else if (mode !== void 0 && mode === \"story\") {\n        results = $tw.wiki.filterTiddlers(\"[list[$:/StoryList]]\");\n      } else {\n        results = this.getHistory();\n      }\n      results = results.map((r) => {\n        return { name: r };\n      });\n      this.showResults(results);\n    };\n  }\n  commandWithHistoryPicker(message, hint, mode) {\n    const handler = (_e) => {\n      this.blockProviderChange = true;\n      this.allowInputFieldSelection = true;\n      this.currentProvider = provider;\n      this.currentResolver = resolver;\n      this.input.value = \"\";\n      this.onInput(this.input.value);\n    };\n    const provider = this.historyProviderBuilder(hint, mode);\n    const resolver = (_e) => {\n      if (this.currentSelection === 0)\n        return;\n      const title = this.getDataFromResultDiv(this.currentResults[this.currentSelection - 1], \"name\");\n      this.parentWidget.dispatchEvent({\n        type: message,\n        param: title,\n        tiddlerTitle: title\n      });\n      this.closePalette();\n    };\n    return {\n      handler,\n      provider,\n      resolver\n    };\n  }\n  onInput(text = \"\") {\n    if (this.blockProviderChange) {\n      this.currentProvider(text);\n      this.setSelectionToFirst();\n      return;\n    }\n    const { resolver, provider, terms } = this.parseCommand(text);\n    this.currentResolver = resolver;\n    this.currentProvider = provider;\n    this.currentProvider(terms);\n    this.setSelectionToFirst();\n  }\n  onClick(event) {\n    if (this.isOpened && !this.div.contains(event.target)) {\n      this.closePalette();\n    }\n  }\n  openPaletteSelection(event) {\n    const selection = this.getCurrentSelection();\n    this.openPalette(event, selection);\n  }\n  openPalette(_e, selection) {\n    this.currentProvider(\"\");\n    this.isOpened = true;\n    this.allowInputFieldSelection = false;\n    this.goBack = void 0;\n    this.blockProviderChange = false;\n    const activeElement = this.getActiveElement();\n    this.previouslyFocused = {\n      element: activeElement,\n      start: activeElement.selectionStart,\n      end: activeElement.selectionEnd,\n      caretPos: activeElement.selectionEnd\n    };\n    this.input.value = \"\";\n    if (selection !== void 0) {\n      this.input.value = selection;\n    }\n    if (this.settings.alwaysPassSelection) {\n      this.input.value += this.getCurrentSelection();\n    }\n    this.currentSelection = 0;\n    this.onInput(this.input.value);\n    this.div.style.display = \"flex\";\n    this.mask.style.opacity = \"0.6\";\n    this.input.focus();\n  }\n  insertSelectedResult() {\n    if (!this.isOpened)\n      return;\n    if (this.currentSelection === 0)\n      return;\n    const previous = this.previouslyFocused;\n    const previousValue = previous.element.value;\n    if (previousValue === void 0)\n      return;\n    const selection = this.getDataFromResultDiv(this.currentResults[this.currentSelection - 1], \"name\");\n    if (!selection)\n      return;\n    if (previous.start === previous.end) {\n      this.previouslyFocused.element.value = previousValue.substring(0, previous.start) + selection + previousValue.substring(previous.start);\n    } else {\n      this.previouslyFocused.element.value = previousValue.substring(0, previous.start) + selection + previousValue.substring(previous.end);\n    }\n    this.previouslyFocused.caretPos = previous.start + selection.length;\n    this.closePalette();\n  }\n  closePalette() {\n    this.div.style.display = \"none\";\n    this.mask.style.opacity = \"0\";\n    this.isOpened = false;\n    this.focusAtCaretPosition(this.previouslyFocused.element, this.previouslyFocused.caretPos);\n  }\n  onKeyDown(e) {\n    switch (e.key) {\n      case \"Escape\": {\n        if (!this.settings.escapeGoesBack || this.goBack === void 0) {\n          this.closePalette();\n        } else {\n          this.goBack();\n          this.goBack = void 0;\n        }\n        break;\n      }\n      case \"ArrowUp\": {\n        e.preventDefault();\n        e.stopPropagation();\n        let sel = this.currentSelection - 1;\n        if (sel === 0) {\n          if (!this.allowInputFieldSelection) {\n            sel = this.currentResults.length;\n          }\n        } else if (sel < 0) {\n          sel = this.currentResults.length;\n        }\n        this.setSelection(sel);\n        break;\n      }\n      case \"ArrowDown\": {\n        e.preventDefault();\n        e.stopPropagation();\n        let sel = (this.currentSelection + 1) % (this.currentResults.length + 1);\n        if (!this.allowInputFieldSelection && sel === 0 && this.currentResults.length > 0) {\n          sel = 1;\n        }\n        this.setSelection(sel);\n        break;\n      }\n      case \"Enter\": {\n        e.preventDefault();\n        e.stopPropagation();\n        this.validateSelection(e);\n        break;\n      }\n    }\n  }\n  addResult(result, id) {\n    const resultDiv = this.createElement(\"div\", { className: \"commandpaletteresult\" });\n    const titleDiv = this.createElement(\"div\", { className: \"commandpalettetitle\", innerText: result.caption || result.name });\n    resultDiv.appendChild(titleDiv);\n    if (result.hint !== void 0) {\n      const hint = this.createElement(\"div\", { className: \"commandpalettehint\", innerText: result.hint });\n      resultDiv.appendChild(hint);\n    }\n    resultDiv.dataset.result = JSON.stringify(result);\n    if (result.action != void 0) {\n      resultDiv.onabort = result.action;\n    }\n    this.currentResults.push(resultDiv);\n    resultDiv.addEventListener(\"click\", (e) => {\n      e.stopPropagation();\n      e.preventDefault();\n      this.setSelection(id + 1);\n      this.validateSelection(e);\n    });\n    resultDiv.addEventListener(\"contextmenu\", (e) => {\n      e.stopPropagation();\n      if (e.ctrlKey && e.button === 0) {\n        e.preventDefault();\n        this.setSelection(id + 1);\n        this.validateSelection(e);\n      }\n    });\n    this.scrollDiv.appendChild(resultDiv);\n  }\n  getDataFromResultDiv(resultDiv, key) {\n    return JSON.parse(resultDiv.dataset.result ?? \"{}\")[key];\n  }\n  getActionFromResultDiv(resultDiv) {\n    return resultDiv.onabort;\n  }\n  validateSelection(e) {\n    if (!this.isIMEOpen) {\n      this.currentResolver(e);\n    }\n  }\n  defaultResolver(e) {\n    if (e.getModifierState(\"Shift\")) {\n      this.input.value = \"+\" + this.input.value;\n      this.createTiddlerResolver(e);\n      return;\n    }\n    if (this.currentSelection === 0)\n      return;\n    const selectionTitle = this.getDataFromResultDiv(this.currentResults[this.currentSelection - 1], \"name\");\n    this.closePalette();\n    this.navigateTo(selectionTitle);\n  }\n  navigateTo(title) {\n    if (title) {\n      this.parentWidget.dispatchEvent({\n        type: \"tm-navigate\",\n        param: title,\n        navigateTo: title\n      });\n    }\n  }\n  showHistory() {\n    this.hint.innerText = \"\\u5386\\u53F2\\u8BB0\\u5F55\";\n    this.currentProvider = (terms) => {\n      let results;\n      if (terms.length === 0) {\n        results = this.getHistory();\n      } else {\n        if ($tw.utils.pinyinfuse) {\n          results = $tw.utils.pinyinfuse(this.getHistory(), terms).map((item) => item.item);\n        } else {\n          results = this.getHistory().filter((item) => item.toLowerCase().includes(terms));\n        }\n      }\n      this.showResults(\n        results.map((title) => {\n          return {\n            name: title,\n            action: () => {\n              this.navigateTo(title);\n              this.closePalette();\n            }\n          };\n        })\n      );\n    };\n    this.currentResolver = (e) => {\n      if (this.currentSelection === 0)\n        return;\n      this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1])?.(e);\n    };\n    this.input.value = \"\";\n    this.blockProviderChange = true;\n    this.onInput(this.input.value);\n  }\n  setSelectionToFirst() {\n    let sel = 1;\n    if (this.allowInputFieldSelection || this.currentResults.length === 0) {\n      sel = 0;\n    }\n    this.setSelection(sel);\n  }\n  setSelection(id) {\n    this.currentSelection = id;\n    for (let index = 0; index < this.currentResults.length; index++) {\n      const selected = this.currentSelection === index + 1;\n      this.currentResults[index].className = selected ? \"commandpaletteresult commandpaletteresultselected\" : \"commandpaletteresult\";\n    }\n    if (this.currentSelection === 0) {\n      this.scrollDiv.scrollTop = 0;\n      return;\n    }\n    const scrollHeight = this.scrollDiv.offsetHeight;\n    const scrollPos = this.scrollDiv.scrollTop;\n    const selectionPos = Number(this.currentResults[this.currentSelection - 1]?.offsetTop ?? 0);\n    const selectionHeight = Number(this.currentResults[this.currentSelection - 1]?.offsetHeight ?? 0);\n    if (selectionPos < scrollPos || selectionPos >= scrollPos + scrollHeight) {\n      let a = selectionPos;\n      let b = selectionPos - scrollHeight + selectionHeight;\n      a = Math.abs(a - scrollPos);\n      b = Math.abs(b - scrollPos);\n      if (a < b) {\n        this.scrollDiv.scrollTop = selectionPos;\n      } else {\n        this.scrollDiv.scrollTop = selectionPos - scrollHeight + selectionHeight;\n      }\n    }\n  }\n  getHistory() {\n    const historyData = $tw.wiki.getTiddlerData(\"$:/HistoryList\") ?? [];\n    const [first, second, ...rest] = (0, import_uniq.default)([...historyData.reverse().map((x) => x.title), ...$tw.wiki.filterTiddlers(\"[list[$:/StoryList]]\")]).filter(\n      (t) => this.tiddlerOrShadowExists(t)\n    );\n    return [second, first, ...rest];\n  }\n  tiddlerOrShadowExists(title) {\n    return $tw.wiki.tiddlerExists(title) || $tw.wiki.isShadowTiddler(title);\n  }\n  defaultProvider(terms) {\n    this.hint.innerText = \"\\u23CE\\u641C\\u7D22\\u6761\\u76EE\\uFF08\\u21E7\\u23CE \\u521B\\u5EFA\\u6761\\u76EE\\uFF09\\uFF08\\uFF1F\\u95EE\\u53F7\\u67E5\\u770B\\u5E2E\\u52A9\\uFF09\";\n    let searches;\n    if (terms.startsWith(\"\\\\\"))\n      terms = terms.substr(1);\n    if (terms.length === 0) {\n      if (this.settings.showHistoryOnOpen) {\n        searches = this.getHistory().map((s) => {\n          return { name: s, hint: \"\\u5386\\u53F2\\u8BB0\\u5F55\" };\n        });\n      } else {\n        searches = [];\n      }\n    } else {\n      searches = (0, import_uniq.default)(this.searchSteps.reduce((accumulator, current) => [...accumulator, ...current(terms)], []));\n    }\n    this.showResults(searches);\n  }\n  searchStepBuilder(filter, caret, hint) {\n    return (terms) => {\n      const search = filter.substring(0, caret) + terms + filter.substring(caret);\n      const results = $tw.wiki.filterTiddlers(search).map((s) => {\n        return { name: s, hint };\n      });\n      return results;\n    };\n  }\n  tagListProvider(terms) {\n    this.currentSelection = 0;\n    this.hint.innerText = \"\\u641C\\u7D22\\u6807\\u7B7E\\u5217\\u8868\";\n    let searches;\n    if (terms.length === 0) {\n      searches = $tw.wiki.filterTiddlers(\"[!is[system]tags[]][is[system]tags[]][all[shadows]tags[]]\");\n    } else {\n      searches = $tw.wiki.filterTiddlers(\n        $tw.utils.pinyinfuse ? `[all[]tags[]!is[system]pinyinfuse[${terms}]][all[]tags[]is[system]pinyinfuse[${terms}]][all[shadows]tags[]pinyinfuse[${terms}]]` : `[all[]tags[]!is[system]search[${terms}]][all[]tags[]is[system]search[${terms}]][all[shadows]tags[]search[${terms}]]`\n      );\n    }\n    searches = searches.map((s) => {\n      return { name: s };\n    });\n    this.showResults(searches);\n  }\n  tagListResolver(_e) {\n    if (this.currentSelection === 0) {\n      const input = this.input.value.substring(2);\n      const exist = $tw.wiki.filterTiddlers(\"[tag[\" + input + \"]]\");\n      if (!exist)\n        return;\n      this.input.value = \"##\" + input;\n      return;\n    }\n    const result = this.currentResults[this.currentSelection - 1];\n    this.input.value = \"##\" + result.innerText;\n    this.onInput(this.input.value);\n  }\n  tagProvider(terms) {\n    this.currentSelection = 0;\n    this.hint.innerText = \"\\u7528\\u300C#\\u6807\\u7B7E #\\u6807\\u7B7E2\\u300D\\u641C\\u7D22\\u6761\\u76EE\";\n    let tiddlerNameSearchResults = [];\n    if (terms.length > 0) {\n      const { tags, searchTerms, tagsFilter } = this.parseTags(this.input.value);\n      const taggedTiddlers = $tw.wiki.filterTiddlers(tagsFilter);\n      if (taggedTiddlers.length > 0) {\n        if (tags.length === 1) {\n          const tag = tags[0];\n          const tagTiddlerExists = this.tiddlerOrShadowExists(tag);\n          if (tagTiddlerExists && searchTerms.some((s) => tag.includes(s)))\n            tiddlerNameSearchResults.push(tag);\n        }\n        tiddlerNameSearchResults = [...tiddlerNameSearchResults, ...taggedTiddlers];\n      }\n    }\n    this.showResults(\n      tiddlerNameSearchResults.map((tiddlerName) => {\n        return { name: tiddlerName };\n      })\n    );\n  }\n  parseTags(input) {\n    const splits = input.split(\" \").filter((s) => s !== \"\");\n    const tags = [];\n    const searchTerms = [];\n    for (const split of splits) {\n      if (split.startsWith(\"#\")) {\n        tags.push(split.substr(1));\n        continue;\n      }\n      searchTerms.push(split);\n    }\n    let tagsFilter = `[all[tiddlers+system+shadows]${tags.reduce((a, c) => {\n      return a + \"tag[\" + c + \"]\";\n    }, \"\")}]`;\n    if (searchTerms.length > 0) {\n      tagsFilter = tagsFilter.substring(0, tagsFilter.length - 1);\n      tagsFilter += `${$tw.utils.pinyinfuse ? \"pinyinfuse\" : \"search\"}[${searchTerms.join(\" \")}]]`;\n    }\n    return { tags, searchTerms, tagsFilter };\n  }\n  settingsProvider(_terms) {\n    this.currentSelection = 0;\n    this.hint.innerText = \"Select the setting you want to change\";\n    const isNumerical = (terms) => terms.length > 0 && terms.match(/\\D/gm) === null;\n    const isBoolean = (terms) => terms.length > 0 && terms.match(/(true\\b)|(false\\b)/gim) !== null;\n    this.showResults([\n      { name: \"Theme (currently \" + this.settings.theme?.match?.(/[^/]*$/), action: () => this.promptForThemeSetting() },\n      this.settingResultBuilder(\"Max results\", \"maxResults\", \"Choose the maximum number of results\", isNumerical, \"Error: value must be a positive integer\"),\n      this.settingResultBuilder(\n        \"Show history on open\",\n        \"showHistoryOnOpen\",\n        \"Chose whether to show the history when you open the palette\",\n        isBoolean,\n        \"Error: value must be 'true' or 'false'\"\n      ),\n      this.settingResultBuilder(\n        \"Escape to go back\",\n        \"escapeGoesBack\",\n        \"Chose whether ESC should go back when possible\",\n        isBoolean,\n        \"Error: value must be 'true' or 'false'\"\n      ),\n      this.settingResultBuilder(\n        \"Use selection as search query\",\n        \"alwaysPassSelection\",\n        \"Chose your current selection is passed to the command palette\",\n        isBoolean,\n        \"Error: value must be 'true' or 'false'\"\n      ),\n      this.settingResultBuilder(\n        \"Never Basic\",\n        \"neverBasic\",\n        \"Chose whether to override basic prompts to show filter operation\",\n        isBoolean,\n        \"Error: value must be 'true' or 'false'\"\n      ),\n      this.settingResultBuilder(\n        \"Field preview max size\",\n        \"maxResultHintSize\",\n        \"Choose the maximum hint length for field preview\",\n        isNumerical,\n        \"Error: value must be a positive integer\"\n      )\n    ]);\n  }\n  settingResultBuilder(name, settingName, hint, validator, errorMessage) {\n    return { name: name + \" (currently \" + this.settings[settingName] + \")\", action: () => this.promptForSetting(settingName, hint, validator, errorMessage) };\n  }\n  settingsResolver(e) {\n    if (this.currentSelection === 0)\n      return;\n    this.goBack = () => {\n      this.input.value = \"|\";\n      this.blockProviderChange = false;\n      this.onInput(this.input.value);\n    };\n    this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1])?.(e);\n  }\n  promptForThemeSetting() {\n    this.blockProviderChange = true;\n    this.allowInputFieldSelection = false;\n    this.currentProvider = (_terms) => {\n      this.currentSelection = 0;\n      this.hint.innerText = \"\\u9009\\u62E9\\u4E00\\u4E2A\\u4E3B\\u9898\";\n      const defaultValue = this.defaultSettings.theme;\n      const results = [\n        {\n          name: \"\\u6062\\u590D\\u9ED8\\u8BA4\\u503C: \" + defaultValue.match(/[^/]*$/),\n          action: () => {\n            this.setSetting(\"theme\", defaultValue);\n            this.refreshThemes();\n          }\n        }\n      ];\n      for (const theme of this.themes) {\n        const name = theme.fields.title;\n        const shortName = name.match(/[^/]*$/);\n        const action = () => {\n          this.setSetting(\"theme\", name);\n          this.refreshThemes();\n        };\n        results.push({ name: shortName, action });\n      }\n      this.showResults(results);\n    };\n    this.currentResolver = (e) => {\n      this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1])?.(e);\n    };\n    this.input.value = \"\";\n    this.onInput(this.input.value);\n  }\n  promptForSetting(settingName, hint, validator, errorMessage) {\n    this.blockProviderChange = true;\n    this.allowInputFieldSelection = true;\n    this.currentProvider = (terms) => {\n      this.currentSelection = 0;\n      this.hint.innerText = hint;\n      const defaultValue = this.defaultSettings[settingName];\n      const results = [{ name: \"Revert to default value: \" + defaultValue, action: () => this.setSetting(settingName, defaultValue) }];\n      if (!validator(terms)) {\n        results.push({ name: errorMessage, action: () => {\n        } });\n      }\n      this.showResults(results);\n    };\n    this.currentResolver = (e) => {\n      if (this.currentSelection === 0) {\n        const input = this.input.value;\n        if (validator(input)) {\n          this.setSetting(settingName, input);\n          this.goBack = void 0;\n          this.blockProviderChange = false;\n          this.allowInputFieldSelection = false;\n          this.promptCommand(\"|\");\n        }\n      } else {\n        const action = this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1]);\n        if (action != void 0) {\n          action(e);\n          this.goBack = void 0;\n          this.blockProviderChange = false;\n          this.allowInputFieldSelection = false;\n          this.promptCommand(\"|\");\n        }\n      }\n    };\n    this.input.value = this.settings[settingName];\n    this.onInput(this.input.value);\n  }\n  showResults(results) {\n    for (const current of this.currentResults) {\n      current.remove();\n    }\n    this.currentResults = [];\n    let resultCount = 0;\n    for (const result of results) {\n      this.addResult(result, resultCount);\n      resultCount++;\n      if (resultCount >= (this.settings.maxResults ?? this.defaultSettings.maxResults))\n        break;\n    }\n  }\n  tmMessageBuilder(message, parameters = {}) {\n    return (e) => {\n      const event = {\n        type: message,\n        paramObject: parameters,\n        event: e\n      };\n      this.parentWidget.dispatchEvent(event);\n    };\n  }\n  actionProvider(terms) {\n    this.currentSelection = 0;\n    this.hint.innerText = \"\\u67E5\\u770B\\u548C\\u641C\\u7D22\\u547D\\u4EE4\\u5217\\u8868\";\n    let results;\n    if (terms.length === 0) {\n      results = this.getCommandHistory();\n    } else {\n      if ($tw.utils.pinyinfuse) {\n        results = $tw.utils.pinyinfuse(this.actions, terms.toLowerCase(), [\"name\", \"caption\"]).map((item) => item.item);\n      } else {\n        results = this.actions.filter(\n          (item) => item.name.toLowerCase().includes(terms.toLowerCase()) || item.caption?.toLowerCase()?.includes(terms.toLowerCase())\n        );\n      }\n    }\n    this.showResults(results);\n  }\n  filterProvider(terms, hint) {\n    this.currentSelection = 0;\n    this.hint.innerText = hint === void 0 ? \"\\u7B5B\\u9009\\u5668\\u8BED\\u53E5\" : hint;\n    terms = \"[\" + terms;\n    const fields = $tw.wiki.filterTiddlers(\"[fields[]]\");\n    const results = $tw.wiki.filterTiddlers(terms).map((r) => {\n      return { name: r };\n    });\n    const insertResult = (index, result) => results.splice(index + 1, 0, result);\n    for (let index = 0; index < results.length; index++) {\n      const initialResult = results[index];\n      let alreadyMatched = false;\n      let date = \"Invalid Date\";\n      if (initialResult.name.length === 17) {\n        date = $tw.utils.parseDate(initialResult.name).toLocaleString();\n      }\n      if (date !== \"Invalid Date\") {\n        results[index].hint = date;\n        results[index].action = () => {\n        };\n        alreadyMatched = true;\n      }\n      const isTag = $tw.wiki.getTiddlersWithTag(initialResult.name).length > 0;\n      if (isTag) {\n        if (alreadyMatched) {\n          insertResult(index, { ...results[index] });\n          index += 1;\n        }\n        results[index].action = () => this.promptCommand(\"#\" + initialResult.name);\n        results[index].hint = \"Tag\";\n        alreadyMatched = true;\n      }\n      const isTiddler = this.tiddlerOrShadowExists(initialResult.name);\n      if (isTiddler) {\n        if (alreadyMatched) {\n          insertResult(index, { ...results[index] });\n          index += 1;\n        }\n        results[index].action = () => {\n          this.navigateTo(initialResult.name);\n          this.closePalette();\n        };\n        results[index].hint = \"Tiddler\";\n        alreadyMatched = true;\n      }\n      const isField = fields.includes(initialResult.name);\n      if (isField) {\n        if (alreadyMatched) {\n          insertResult(index, { ...results[index] });\n          index += 1;\n        }\n        let parsed;\n        try {\n          parsed = $tw.wiki.parseFilter(this.input.value);\n        } catch {\n        }\n        const foundTitles = [];\n        for (const node of parsed || []) {\n          if (node.operators.length !== 2)\n            continue;\n          if (node.operators[0].operator === \"title\" && node.operators[1].operator === \"fields\") {\n            foundTitles.push(node.operators[0].operand);\n          }\n        }\n        let hint2 = \"Field\";\n        if (foundTitles.length === 1) {\n          hint2 = $tw.wiki.getTiddler(foundTitles[0]).fields[initialResult.name];\n          if (hint2 instanceof Date) {\n            hint2 = hint2.toLocaleString();\n          }\n          hint2 = hint2.toString().replace(/(\\r\\n|\\n|\\r)/gm, \"\");\n          const maxSize = (this.settings.maxResultHintSize ?? this.defaultSettings.maxResultHintSize) - 3;\n          if (hint2.length > maxSize) {\n            hint2 = hint2.substring(0, maxSize);\n            hint2 += \"...\";\n          }\n        }\n        results[index].hint = hint2;\n        results[index].action = () => {\n        };\n        alreadyMatched = true;\n      }\n    }\n    this.showResults(results);\n  }\n  filterResolver(e) {\n    if (this.currentSelection === 0)\n      return;\n    this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1])?.(e);\n    e.stopPropagation();\n  }\n  helpResolver(e) {\n    if (this.currentSelection === 0)\n      return;\n    this.getActionFromResultDiv(this.currentResults[this.currentSelection - 1])?.(e);\n    e.stopPropagation();\n  }\n  createTiddlerProvider(_terms) {\n    this.currentSelection = 0;\n    this.hint.innerText = \"\\u521B\\u5EFA\\u6761\\u76EE\\uFF0C\\u7A7A\\u683C\\u9694\\u5F00\\u53EF\\u4EE5\\u7528#\\u6253\\u591A\\u4E2A\\u6807\\u7B7E\";\n    this.showResults([]);\n  }\n  createTiddlerResolver(e) {\n    let { tags, searchTerms } = this.parseTags(this.input.value.substring(1));\n    const title = searchTerms.join(\" \");\n    tags = tags.join(\" \");\n    this.tmMessageBuilder(\"tm-new-tiddler\", { title, tags })(e);\n    this.closePalette();\n  }\n  promptCommand(value, caret) {\n    this.blockProviderChange = false;\n    this.input.value = value;\n    this.input.focus();\n    if (caret !== void 0) {\n      this.input.setSelectionRange(caret, caret);\n    }\n    this.onInput(this.input.value);\n  }\n  promptCommandBasic(value, caret, hint) {\n    if (this.settings.neverBasic === true) {\n      this.promptCommand(value, caret);\n      return;\n    }\n    this.input.value = \"\";\n    this.blockProviderChange = true;\n    this.currentProvider = this.basicProviderBuilder(value, caret, hint);\n    this.onInput(this.input.value);\n  }\n  basicProviderBuilder(value, caret, hint) {\n    const start = value.substr(0, caret);\n    const end = value.substr(caret);\n    return (input) => {\n      const { resolver, provider, terms } = this.parseCommand(start + input + end);\n      const backgroundProvider = provider;\n      backgroundProvider(terms, hint);\n      this.currentResolver = resolver;\n    };\n  }\n  getCommandHistory() {\n    this.history = this.history.filter((h) => this.actions.some((a) => a.name === h));\n    const results = this.history.map((h) => this.actions.find((a) => a.name === h));\n    while (results.length <= (this.settings.maxResults ?? this.defaultSettings.maxResults)) {\n      const nextDefaultAction = this.actions.find((a) => !results.includes(a));\n      if (nextDefaultAction === void 0)\n        break;\n      results.push(nextDefaultAction);\n    }\n    return results;\n  }\n  actionResolver(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (this.currentSelection === 0)\n      return;\n    const result = this.actions.find((a) => a.name === this.getDataFromResultDiv(this.currentResults[this.currentSelection - 1], \"name\"));\n    if (result == void 0)\n      return;\n    if (result.keepPalette) {\n      const currentInput = this.input.value;\n      this.goBack = () => {\n        this.input.value = currentInput;\n        this.blockProviderChange = false;\n        this.onInput(this.input.value);\n      };\n    }\n    this.updateCommandHistory(result);\n    result.action?.(e);\n    if (result.immediate) {\n      this.validateSelection(e);\n      return;\n    }\n    if (!result.keepPalette) {\n      this.closePalette();\n    }\n  }\n  getCurrentSelection() {\n    const selection = window.getSelection().toString();\n    if (selection !== \"\")\n      return selection;\n    const activeElement = this.getActiveElement();\n    if (activeElement === void 0 || activeElement.selectionStart === void 0)\n      return \"\";\n    if (activeElement.selectionStart > activeElement.selectionEnd) {\n      return activeElement.value.substring(activeElement.selectionStart, activeElement.selectionEnd);\n    } else {\n      return activeElement.value.substring(activeElement.selectionEnd, activeElement.selectionStart);\n    }\n  }\n  getActiveElement(element = document.activeElement) {\n    const shadowRoot = element.shadowRoot;\n    const contentDocument = element.contentDocument;\n    if (shadowRoot?.activeElement) {\n      return this.getActiveElement(shadowRoot.activeElement);\n    }\n    if (contentDocument?.activeElement) {\n      return this.getActiveElement(contentDocument.activeElement);\n    }\n    return element;\n  }\n  focusAtCaretPosition(element, caretPos) {\n    if (element !== null) {\n      element.value = element.value;\n      if (element.createTextRange) {\n        const range = element.createTextRange();\n        range.move(\"character\", caretPos);\n        range.select();\n        return true;\n      } else {\n        if (element.selectionStart || element.selectionStart === 0) {\n          element.focus();\n          element.setSelectionRange(caretPos, caretPos);\n          return true;\n        } else {\n          element.focus();\n          return false;\n        }\n      }\n    }\n  }\n  createElement(name, proprieties, styles) {\n    const element = this.document.createElement(name);\n    for (const [propriety, value] of Object.entries(proprieties || {})) {\n      element[propriety] = value;\n    }\n    for (const [style, value] of Object.entries(styles != void 0 || {})) {\n      element.style[style] = value;\n    }\n    return element;\n  }\n  refresh() {\n    return false;\n  }\n};\nexports.commandpalettewidget = CommandPaletteWidget;\n","type":"application/javascript","module-type":"widget"},"$:/plugins/linonetwo/commandpalette/settings/HideDefaultSearchBar":{"title":"$:/plugins/linonetwo/commandpalette/settings/HideDefaultSearchBar","text":"no"},"$:/plugins/linonetwo/commandpalette/ControlPanel/Settings":{"title":"$:/plugins/linonetwo/commandpalette/ControlPanel/Settings","caption":"CommandPalette","tags":"$:/tags/ControlPanel/SettingsTab","text":"These settings let you customise the behaviour of CommandPalette plugin.\n\n---\n\n!! Appearance\n\n;Hide default search bar:\n:<$checkbox tiddler=\"$:/plugins/linonetwo/commandpalette/settings/HideDefaultSearchBar\" field=\"text\" checked=\"yes\" unchecked=\"no\"> If you only use commandpalette to search and don't need default search bar, check this box.</$checkbox>"},"$:/plugins/linonetwo/commandpalette/Browser Refresh":{"title":"$:/plugins/linonetwo/commandpalette/Browser Refresh","command-palette-name":"Browser Refresh","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/Refresh/Caption}}","command-palette-hint":"{{$:/language/Buttons/Refresh/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-browser-refresh\n"},"$:/plugins/linonetwo/commandpalette/Cancel Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/Cancel Tiddler","command-palette-mode":"drafts","command-palette-name":"Cancel Tiddler","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Cancel/Caption}}","command-palette-hint":"{{$:/language/Buttons/Cancel/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-cancel-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Clone Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/Clone Tiddler","command-palette-name":"Clone Tiddler","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Clone/Caption}}","command-palette-hint":"{{$:/language/Buttons/Clone/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-new-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Close All Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/Close All Tiddlers","command-palette-name":"Close All Tiddlers","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/CloseAll/Caption}}","command-palette-hint":"{{$:/language/Buttons/CloseAll/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-close-all-tiddlers\n"},"$:/plugins/linonetwo/commandpalette/Close Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/Close Tiddler","command-palette-name":"Close Tiddler","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Close/Caption}}","command-palette-hint":"{{$:/language/Buttons/Close/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-close-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Close other Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/Close other Tiddlers","command-palette-name":"Close other Tiddlers","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/CloseOthers/Caption}}","command-palette-hint":"{{$:/language/Buttons/CloseOthers/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-close-other-tiddlers\n"},"$:/plugins/linonetwo/commandpalette/Command Palette Settings":{"title":"$:/plugins/linonetwo/commandpalette/Command Palette Settings","command-palette-name":"Command Palette Settings","command-palette-type":"prompt","command-palette-caption":"命令菜单设置","command-palette-hint":"打开命令菜单的设置，快捷设置命令菜单相关配置","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"|\n"},"$:/plugins/linonetwo/commandpalette/ControlPanel Command":{"title":"$:/plugins/linonetwo/commandpalette/ControlPanel Command","command-palette-name":"Show Control Panel","command-palette-type":"actionString","command-palette-caption":"打开命令菜单","command-palette-hint":"打开命令菜单","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"<$action-navigate $to=\"$:/ControlPanel\"/>"},"$:/plugins/linonetwo/commandpalette/Delete Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/Delete Tiddler","command-palette-name":"Delete Tiddler","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Delete/Caption}}","command-palette-hint":"{{$:/language/Buttons/Delete/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-delete-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Edit Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/Edit Tiddler","command-palette-name":"Edit Tiddler","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Edit/Caption}}","command-palette-hint":"{{$:/language/Buttons/Edit/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-edit-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Filter operation":{"title":"$:/plugins/linonetwo/commandpalette/Filter operation","command-palette-name":"Filter operation","command-palette-type":"prompt","command-palette-caption":"{{$:/language/Buttons/AdvancedSearch/Caption}}","command-palette-hint":"{{$:/language/Buttons/AdvancedSearch/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[\n"},"$:/plugins/linonetwo/commandpalette/Fold All Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/Fold All Tiddlers","command-palette-name":"Fold All Tiddlers","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/FoldAll/Caption}}","command-palette-hint":"{{$:/language/Buttons/FoldAll/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-fold-all-tiddlers\n"},"$:/plugins/linonetwo/commandpalette/Home":{"title":"$:/plugins/linonetwo/commandpalette/Home","command-palette-name":"Home","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/Home/Caption}}","command-palette-hint":"{{$:/language/Buttons/Home/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-home\n"},"$:/plugins/linonetwo/commandpalette/New Journal Command":{"title":"$:/plugins/linonetwo/commandpalette/New Journal Command","command-palette-name":"New Journal","command-palette-type":"actionString","command-palette-caption":"{{$:/language/Buttons/NewJournal/Caption}}","command-palette-hint":"{{$:/language/Buttons/NewJournal/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"{{$:/core/ui/Actions/new-journal}}\n"},"$:/plugins/linonetwo/commandpalette/New Tiddler with title":{"title":"$:/plugins/linonetwo/commandpalette/New Tiddler with title","command-palette-name":"New Tiddler with title","command-palette-type":"prompt","command-palette-caption":"以标题{{$:/language/Buttons/NewTiddler/Caption}}","command-palette-hint":"以标题{{$:/language/Buttons/NewTiddler/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"+\n"},"$:/plugins/linonetwo/commandpalette/New Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/New Tiddler","command-palette-name":"New Tiddler","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/NewTiddler/Caption}}","command-palette-hint":"{{$:/language/Buttons/NewTiddler/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-new-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Permalink":{"title":"$:/plugins/linonetwo/commandpalette/Permalink","command-palette-name":"Permalink","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Permalink/Caption}}","command-palette-hint":"{{$:/language/Buttons/Permalink/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-permalink\n"},"$:/plugins/linonetwo/commandpalette/Permaview":{"title":"$:/plugins/linonetwo/commandpalette/Permaview","command-palette-name":"Permaview","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/Permaview/Caption}}","command-palette-hint":"{{$:/language/Buttons/Permaview/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-permaview\n"},"$:/plugins/linonetwo/commandpalette/Print":{"title":"$:/plugins/linonetwo/commandpalette/Print","command-palette-name":"Print","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/Print/Caption}}","command-palette-hint":"{{$:/language/Buttons/Print/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-print\n"},"$:/plugins/linonetwo/commandpalette/Recent Tiddlers Command":{"title":"$:/plugins/linonetwo/commandpalette/Recent Tiddlers Command","command-palette-caret":"33","command-palette-name":"Recent Tiddlers","command-palette-type":"prompt-basic","command-palette-caption":"查看最近编辑过的Tiddler","command-palette-hint":"在命令菜单里列出最近编辑过的Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[!is[system]!sort[created]search[]]\n"},"$:/plugins/linonetwo/commandpalette/Refresh Server":{"title":"$:/plugins/linonetwo/commandpalette/Refresh Server","command-palette-name":"Refresh Server","command-palette-type":"message","command-palette-caption":"服务器{{$:/language/Buttons/Refresh/Caption}}","command-palette-hint":"服务器{{$:/language/Buttons/Refresh/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-server-refresh\n"},"$:/plugins/linonetwo/commandpalette/Save Tiddler":{"title":"$:/plugins/linonetwo/commandpalette/Save Tiddler","command-palette-mode":"drafts","command-palette-name":"Save Tiddler","command-palette-type":"history","command-palette-caption":"{{$:/language/Buttons/Save/Caption}}","command-palette-hint":"{{$:/language/Buttons/Save/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-save-tiddler\n"},"$:/plugins/linonetwo/commandpalette/Save Wiki":{"title":"$:/plugins/linonetwo/commandpalette/Save Wiki","command-palette-name":"Save Wiki","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/SaveWiki/Caption}}","command-palette-hint":"{{$:/language/Buttons/SaveWiki/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-save-wiki\n"},"$:/plugins/linonetwo/commandpalette/Search Tags":{"title":"$:/plugins/linonetwo/commandpalette/Search Tags","command-palette-name":"Search Tags","command-palette-type":"prompt","command-palette-caption":"搜索标签列表","command-palette-hint":"在命令菜单里列出搜索到的标签","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"#\n"},"$:/plugins/linonetwo/commandpalette/Search fields":{"title":"$:/plugins/linonetwo/commandpalette/Search fields","command-palette-caret":"16","command-palette-name":"Search fields","command-palette-type":"prompt-basic","command-palette-caption":"搜索字段名","command-palette-hint":"在命令菜单里搜索列出所有Wiki里涉及到的字段名","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[fields[]search[]]\n"},"$:/plugins/linonetwo/commandpalette/Search tiddlers with tag":{"title":"$:/plugins/linonetwo/commandpalette/Search tiddlers with tag","command-palette-name":"用 @标签 搜索条目","command-palette-type":"prompt","command-palette-caption":"带某个标签的Tiddler","command-palette-hint":"在命令菜单里列出带某个标签的Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"@\n"},"$:/plugins/linonetwo/commandpalette/Search":{"title":"$:/plugins/linonetwo/commandpalette/Search","command-palette-name":"Search","command-palette-type":"prompt","command-palette-caption":"{{$:/language/Buttons/AdvancedSearch/Caption}}","command-palette-hint":"{{$:/language/Buttons/AdvancedSearch/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki"},"$:/plugins/linonetwo/commandpalette/See Drafts":{"title":"$:/plugins/linonetwo/commandpalette/See Drafts","command-palette-caret":"27","command-palette-name":"See Drafts","command-palette-type":"prompt-basic","command-palette-caption":"查看草稿Tiddler","command-palette-hint":"在命令菜单里列出所有处于草稿状态的Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[has:field[draft.of]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See Languages":{"title":"$:/plugins/linonetwo/commandpalette/See Languages","command-palette-caret":"43","command-palette-name":"See Languages","command-palette-type":"prompt-basic","command-palette-caption":"查看语言列表","command-palette-hint":"在命令菜单里列出语言列表","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[!has[draft.of]plugin-type[language]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See Missing Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/See Missing Tiddlers","command-palette-caret":"20","command-palette-name":"See Mising Tiddlers","command-palette-type":"prompt-basic","command-palette-caption":"查看缺失的Tiddler","command-palette-hint":"在命令菜单里列出缺失的Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[all[missing]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See Orphans Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/See Orphans Tiddlers","command-palette-caret":"20","command-palette-name":"See Orphans Tiddlers","command-palette-type":"prompt-basic","command-palette-caption":"查看孤儿Tiddler","command-palette-hint":"在命令菜单里列出孤儿Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[all[orphans]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See Plugins":{"title":"$:/plugins/linonetwo/commandpalette/See Plugins","command-palette-caret":"41","command-palette-name":"See Plugins","command-palette-type":"prompt-basic","command-palette-caption":"查看插件列表","command-palette-hint":"在命令菜单里列出插件列表","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[!has[draft.of]plugin-type[plugin]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See Shadows Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/See Shadows Tiddlers","command-palette-caret":"20","command-palette-name":"See Shadows Tiddlers","command-palette-type":"prompt-basic","command-palette-caption":"查看系统Tiddler","command-palette-hint":"在命令菜单里列出系统Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[all[shadows]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See Story List":{"title":"$:/plugins/linonetwo/commandpalette/See Story List","command-palette-caret":"26","command-palette-name":"See Story List","command-palette-type":"prompt-basic","command-palette-caption":"查看开启的Tiddler","command-palette-hint":"在命令菜单里列出开启的Tiddler","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[list[$:/StoryList]search[]]"},"$:/plugins/linonetwo/commandpalette/See Themes":{"title":"$:/plugins/linonetwo/commandpalette/See Themes","command-palette-caret":"40","command-palette-name":"See Themes","command-palette-type":"prompt-basic","command-palette-caption":"查看主题","command-palette-hint":"列出可用主题","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[!has[draft.of]plugin-type[theme]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See all content-types":{"title":"$:/plugins/linonetwo/commandpalette/See all content-types","command-palette-caret":"48","command-palette-name":"See all content-type","command-palette-type":"prompt-basic","command-palette-caption":"查看内容类型","command-palette-hint":"在命令菜单里列出所有Wiki里涉及到的内容类型","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[all[tiddlers+shadows]each[type]get[type]search[]]\n"},"$:/plugins/linonetwo/commandpalette/See untagged tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/See untagged tiddlers","command-palette-caret":"29","command-palette-name":"See untagged Tiddlers","command-palette-type":"prompt-basic","command-palette-caption":"查看未打标签的Tiddler","command-palette-hint":"在命令菜单里列出未打标签的Tiddler列表","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[untagged[]!is[system]search[]]\n"},"$:/plugins/linonetwo/commandpalette/Show help":{"title":"$:/plugins/linonetwo/commandpalette/Show help","command-palette-name":"Show help","command-palette-type":"prompt","command-palette-caption":"展示帮助","command-palette-hint":"列出有哪些用法","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"?\n"},"$:/plugins/linonetwo/commandpalette/Toggle Fullscreen":{"title":"$:/plugins/linonetwo/commandpalette/Toggle Fullscreen","command-palette-name":"Toggle Fullscreen","command-palette-type":"message","command-palette-caption":"{{$:/language/Buttons/FullScreen/Caption}}","command-palette-hint":"{{$:/language/Buttons/FullScreen/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"tm-full-screen\n"},"$:/plugins/linonetwo/commandpalette/Unfold All Tiddlers":{"title":"$:/plugins/linonetwo/commandpalette/Unfold All Tiddlers","command-palette-name":"Unfold All Tiddlers","command-palette-type":"actionString","command-palette-caption":"{{$:/language/Buttons/UnfoldAll/Caption}}","command-palette-hint":"{{$:/language/Buttons/UnfoldAll/Hint}}","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"tm-unfold-all-tiddlers\" foldedStatePrefix=\"$:/state/folded/\"/>\n"},"$:/plugins/linonetwo/commandpalette/Version":{"title":"$:/plugins/linonetwo/commandpalette/Version","command-palette-caret":"49","command-palette-name":"Version","command-palette-type":"prompt-basic","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"[[$:/plugins/linonetwo/commandpalette]get[version]]"},"$:/plugins/linonetwo/commandpalette/show tiddler commands":{"title":"$:/plugins/linonetwo/commandpalette/show tiddler commands","command-palette-name":"Show CommandTiddlers","command-palette-type":"prompt","command-palette-caption":"展示可用命令Tiddler列表","command-palette-hint":"列出命令菜单的命令来自哪些Tiddlers","tags":"$:/tags/CommandPaletteCommand","type":"text/vnd.tiddlywiki","text":"@$:/tags/CommandPaletteCommand\n"},"$:/plugins/linonetwo/itonnote/readme":{"title":"$:/plugins/linonetwo/itonnote/readme","type":"text/vnd.tiddlywiki","text":"此插件基于[[Souk21/TW-commandpalette|https://github.com/Souk21/TW-commandpalette]]，非常感谢他的工作，在过去的一年里这个插件极大地为我提高了工作效率。我将它主要源码复制过来汉化并加入拼音搜索功能，以便我们更灵活地在中文环境下使用。\n\n!! 功能\n\n按下 ctrl/cmd + P 唤起搜索框，按的时候如果多加一个 shift 可以唤起功能框。\n\n搜索的时候可以打拼音。\n"},"$:/config/ShortcutInfo/command-palette-switch-history-back":{"title":"$:/config/ShortcutInfo/command-palette-switch-history-back","tags":"","type":"text/vnd.tiddlywiki","text":"Switch to previously opened tiddler (Inversed)"},"$:/config/ShortcutInfo/command-palette-switch-history":{"title":"$:/config/ShortcutInfo/command-palette-switch-history","tags":"","type":"text/vnd.tiddlywiki","text":"Switch to previously opened tiddler"},"$:/config/ShortcutInfo/insert-command-palette-result":{"title":"$:/config/ShortcutInfo/insert-command-palette-result","created":"20200604175511112","modified":"20200604175520378","tags":"","type":"text/vnd.tiddlywiki","text":"Insert the current result in the previously focused element"},"$:/config/ShortcutInfo/open-command-palette-command-mode":{"title":"$:/config/ShortcutInfo/open-command-palette-command-mode","tags":"","type":"text/vnd.tiddlywiki","text":"Open the command palette in command mode"},"$:/config/ShortcutInfo/open-command-palette-selection":{"title":"$:/config/ShortcutInfo/open-command-palette-selection","created":"20200604175511112","modified":"20200604175520378","tags":"","type":"text/vnd.tiddlywiki","text":"Open the command palette with current selection"},"$:/config/ShortcutInfo/open-command-palette":{"title":"$:/config/ShortcutInfo/open-command-palette","created":"20200531223953066","modified":"20200531224011568","tags":"","type":"text/vnd.tiddlywiki","text":"Open the command palette"},"$:/config/shortcuts-mac/insert-command-palette-result":{"title":"$:/config/shortcuts-mac/insert-command-palette-result","type":"text/vnd.tiddlywiki","text":"shift-cmd-I"},"$:/config/shortcuts-mac/open-command-palette-command-mode":{"title":"$:/config/shortcuts-mac/open-command-palette-command-mode","type":"text/vnd.tiddlywiki","text":"cmd-shift-P"},"$:/config/shortcuts-mac/open-command-palette":{"title":"$:/config/shortcuts-mac/open-command-palette","type":"text/vnd.tiddlywiki","text":"cmd-P"},"$:/config/shortcuts/command-palette-switch-history-back":{"title":"$:/config/shortcuts/command-palette-switch-history-back","tags":"","type":"text/vnd.tiddlywiki","text":"ctrl-shift-tab"},"$:/config/shortcuts/command-palette-switch-history":{"title":"$:/config/shortcuts/command-palette-switch-history","tags":"","type":"text/vnd.tiddlywiki","text":"ctrl-tab"},"$:/config/shortcuts/insert-command-palette-result":{"title":"$:/config/shortcuts/insert-command-palette-result","created":"20200604175539239","modified":"20200604175658624","type":"text/vnd.tiddlywiki","text":"ctrl+shift+I"},"$:/config/shortcuts/open-command-palette-command-mode":{"title":"$:/config/shortcuts/open-command-palette-command-mode","type":"text/vnd.tiddlywiki","text":"ctrl-shift-P"},"$:/config/shortcuts/open-command-palette-selection":{"title":"$:/config/shortcuts/open-command-palette-selection","type":"text/vnd.tiddlywiki","text":""},"$:/config/shortcuts/open-command-palette":{"title":"$:/config/shortcuts/open-command-palette","tags":"","type":"text/vnd.tiddlywiki","text":"ctrl-P"},"$:/core/ui/KeyboardShortcuts/CommandPalette":{"title":"$:/core/ui/KeyboardShortcuts/CommandPalette","key":"((open-command-palette))","tags":"$:/tags/KeyboardShortcut","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"open-command-palette\"/>"},"$:/plugins/linonetwo/commandpalette/CommandPaletteCommandMode":{"title":"$:/plugins/linonetwo/commandpalette/CommandPaletteCommandMode","key":"((open-command-palette-command-mode))","tags":"$:/tags/KeyboardShortcut","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"open-command-palette\" $param=\">\" />"},"$:/plugins/linonetwo/commandpalette/CommandPaletteSelection":{"title":"$:/plugins/linonetwo/commandpalette/CommandPaletteSelection","created":"20200604175339522","key":"((open-command-palette-selection))","modified":"20200604175716862","tags":"$:/tags/KeyboardShortcut","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"open-command-palette-selection\"/>"},"$:/plugins/linonetwo/commandpalette/CommandPaletteSwitchHistory":{"title":"$:/plugins/linonetwo/commandpalette/CommandPaletteSwitchHistory","key":"((command-palette-switch-history))","tags":"$:/tags/KeyboardShortcut","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"command-palette-switch-history\" />"},"$:/plugins/linonetwo/commandpalette/CommandPaletteSwitchHistoryBack":{"title":"$:/plugins/linonetwo/commandpalette/CommandPaletteSwitchHistoryBack","key":"((command-palette-switch-history-back))","tags":"$:/tags/KeyboardShortcut","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"command-palette-switch-history-back\" />"},"$:/plugins/linonetwo/commandpalette/InsertCommandPaletteResult":{"title":"$:/plugins/linonetwo/commandpalette/InsertCommandPaletteResult","key":"((insert-command-palette-result))","tags":"$:/tags/KeyboardShortcut","type":"text/vnd.tiddlywiki","text":"<$action-sendmessage $message=\"insert-command-palette-result\"/>"},"$:/plugins/linonetwo/commandpalette/Compact.css":{"title":"$:/plugins/linonetwo/commandpalette/Compact.css","tags":"$:/tags/CommandPaletteTheme $:/tags/Stylesheet","type":"text/vnd.tiddlywiki","text":"\\rules only filteredtranscludeinline transcludeinline macrodef macrocallinline html\n:root {\n    --palette-radius: 5px;\n}\n.commandpalette {\n    position: fixed;\n    background: <<colour background>>;\n    z-index: 9999;\n    left: 50%;\n    top: 10%;\n    transform: translate(-50%, 0%);\n    width: 500px;\n    display: none;\n    flex-direction: column;\n    font-size: 21px;\n    border-radius: var(--palette-radius);\n    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 14px;\n    border: 2px solid <<colour page-background>>;\n}\n@media (max-width: 540px) {\n  .commandpalette {\n    width: calc(100vw - 40px);\n  }\n}\n.commandpalette-masklayer {\n    position: fixed;\n    z-index: 9998;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100vw;\n    height: 100vh;\n    background: <<colour background>>;\n    opacity: 0;\n    filter: contrast(130%);\n    min-width: 200px !important;\n    transition: all {{$:/config/AnimationDuration}}ms;\n    pointer-events: none;\n    backdrop-filter: blur(10px);\n    background-color: rgba(255,255,255,0.6);\n}\n.inputhintwrapper {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid <<colour page-background>>;\n}\n.commandpalette input {\n    border: 0;\n    background: 0;\n    height: 40px;\n    color: <<colour foreground>>;\n    border-radius: var(--palette-radius) var(--palette-radius) 0px 0px;\n    outline: 0;\n    min-width: 50px;\n    flex: 1;\n    padding-left: 7px;\n}\n.commandpalettetitle {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n.commandpalettehint {\n    font-size: 13px;\n    text-align: right;\n    flex-shrink: 0;\n    padding-right: 7px;\n    opacity: 0.6;\n    font-weight: 800;\n}\n.commandpaletteresultselected>.commandpalettehint {\n    opacity: 1;\n}\n.commandpalettehintmain {\n\n}\n.commandpaletteresult {\n    background: <<colour background>>;\n    font-size: 15px;\n    color: <<colour foreground>>;\n    fill: <<colour foreground>>;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-left: 6px;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    cursor: pointer;\n    width: 100%;\n}\n.commandpaletteresult:not(:last-child) {\n    border-bottom: <<colour page-background>> solid 1px;\n}\n.commandpaletteresult:hover:not(.commandpaletteresultselected) {\n    background: <<colour page-background>>;\n}\n.commandpaletteresultselected {\n    background: <<colour primary>>;\n    color: <<colour tiddler-link-background>>;\n    fill: <<colour tiddler-link-background>>;\n}\n.cp-scroll{\n    max-height: 50vh;\n    overflow-y: auto;\n    position: relative;\n    border-radius: 0px 0px var(--palette-radius) var(--palette-radius);\n}\n"},"$:/plugins/linonetwo/commandpalette/HideVanillaSearch.css":{"title":"$:/plugins/linonetwo/commandpalette/HideVanillaSearch.css","tags":"$:/tags/Stylesheet","type":"text/vnd.tiddlywiki","text":"<$list filter=\"[[$:/plugins/linonetwo/commandpalette/settings/HideDefaultSearchBar]get[text]else[no]match[yes]]\">\n.tc-sidebar-lists.tc-sidebar-search {\n  display: none;\n}\n</$list>\n"},"$:/plugins/linonetwo/commandpalette/Original.css":{"title":"$:/plugins/linonetwo/commandpalette/Original.css","tags":"$:/tags/CommandPaletteTheme","type":"text/vnd.tiddlywiki","text":"\n\\rules only filteredtranscludeinline transcludeinline macrodef macrocallinline html\n:root {\n    --palette-radius: 5px;\n}\n.commandpalette {\n    position: fixed;\n    background:<<colour page-background>>;\n    z-index: 9999;\n    left: 50%;\n    top: 10%;\n    transform: translate(-50%, 0%);\n    width: 500px;\n    display: none;\n    flex-direction: column;\n    font-size: 21px;\n    border-radius: var(--palette-radius);\n    box-shadow: rgba(0, 0, 0, 0.15) 0px 0px 14px;\n    border: 4px solid transparent;\n}\n@media (max-width: 540px) {\n  .commandpalette {\n    width: calc(100vw - 40px);\n  }\n}\n.commandpalette-masklayer {\n    position: fixed;\n    z-index: 9998;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    width: 100vw;\n    height: 100vh;\n    background: <<colour background>>;\n    opacity: 0;\n    filter: contrast(130%);\n    min-width: 200px !important;\n    transition: all {{$:/config/AnimationDuration}}ms;\n    pointer-events: none;\n    backdrop-filter: blur(10px);\n    background-color: rgba(255,255,255,0.6);\n}\n.commandpalette input {\n    border: 0;\n    height: 40px;\n    color: <<colour foreground>>;\n    border-radius: var(--palette-radius) var(--palette-radius) 0px 0px;\n    padding-left: 11px;\n    padding-right: 11px;\n    width: 100%;\n    outline: 0;\n}\n.commandpalettetitle {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n.commandpalettehint {\n    font-size: 13px;\n    text-align: right;\n    flex-shrink: 0;\n    padding-right: 7px;\n    opacity: 0.6;\n    font-weight: 800;\n}\n.commandpaletteresultselected>.commandpalettehint {\n    opacity: 1;\n}\n.commandpalettehintmain {\n}\n.commandpaletteresult {\n    background: <<colour background>>;\n    font-size: 15px;\n    color: <<colour foreground>>;\n    fill: <<colour foreground>>;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-left: 6px;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    cursor: pointer;\n    width: 100%;\n}\n.commandpaletteresult:not(:last-child) {\n    border-bottom: <<colour page-background>> solid 1px;\n}\n.commandpaletteresult:hover:not(.commandpaletteresultselected) {\n    background: <<colour page-background>>;\n}\n.commandpaletteresultselected {\n    background: <<colour primary>>;\n    color: <<colour page-background>>;\n    fill: <<colour page-background>>;\n}\n.cp-scroll{\n    max-height: 50vh;\n    overflow-y: auto;\n    position: relative;\n    border-radius: 0px 0px var(--palette-radius) var(--palette-radius);\n}\n"},"$:/core/ui/Buttons/CommandPalette":{"title":"$:/core/ui/Buttons/CommandPalette","caption":"{{$:/plugins/linonetwo/commandpalette/command-palette.svg}} Command Palette","description":"Open Command Palette","tags":"$:/tags/PageControls","type":"text/vnd.tiddlywiki","text":"<$button class=<<tv-config-toolbar-class>> message=\"open-command-palette\" tooltip=\"Open Command Palette\" aria-label=\"Command Palette\"><$list filter=\"[<tv-config-toolbar-icons>match[yes]]\">{{$:/plugins/linonetwo/commandpalette/command-palette.svg}}</$list><$list filter=\"[<tv-config-toolbar-text>match[yes]]\"><span class=\"tc-btn-text\"><$text text=\"Command Palette\"/></span></$list></$button>\n"},"$:/plugins/linonetwo/commandpalette/View":{"title":"$:/plugins/linonetwo/commandpalette/View","tags":"$:/tags/AboveStory","type":"text/vnd.tiddlywiki","text":"<$commandpalettewidget/>\n"},"$:/plugins/linonetwo/commandpalette/command-palette.svg":{"title":"$:/plugins/linonetwo/commandpalette/command-palette.svg","tags":"$:/tags/Image","text":"<svg aria-hidden=\"true\" width=\"22pt\" height=\"22pt\" class=\"tc-image-button commandpalette-button\" viewBox=\"0 0 512 512\" style=\"transform: rotate(225deg);\">\n  <path d=\"M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm0-96c8.84 0 16 7.16 16 16s-7.16 16-16 16-16-7.16-16-16 7.16-16 16-16zm352 224l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm0 96c-8.84 0-16-7.16-16-16s7.16-16 16-16 16 7.16 16 16-7.16 16-16 16zm70.63-306.04L434.04 9.37C427.79 3.12 419.6 0 411.41 0s-16.38 3.12-22.63 9.37L9.37 388.79c-12.5 12.5-12.5 32.76 0 45.25l68.59 68.59c6.25 6.25 14.44 9.37 22.63 9.37s16.38-3.12 22.63-9.37l379.41-379.41c12.49-12.5 12.49-32.76 0-45.26zM100.59 480L32 411.41l258.38-258.4 68.6 68.6L100.59 480zm281.02-281.02l-68.6-68.6L411.38 32h.03L480 100.59l-98.39 98.39z\" fill-rule=\"evenodd\"/>\n</svg>\n"}}}